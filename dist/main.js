var Ac=Object.create;var Ta=Object.defineProperty;var kc=Object.getOwnPropertyDescriptor;var Mc=Object.getOwnPropertyNames;var Dc=Object.getPrototypeOf,qc=Object.prototype.hasOwnProperty;var N=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Mc(e))!qc.call(t,s)&&s!==r&&Ta(t,s,{get:()=>e[s],enumerable:!(n=kc(e,s))||n.enumerable});return t};var Na=(t,e,r)=>(r=t!=null?Ac(Dc(t)):{},jc(e||!t||!t.__esModule?Ta(r,"default",{value:t,enumerable:!0}):r,t));var Qt=N(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.regexpCode=V.getEsmExportName=V.getProperty=V.safeStringify=V.stringify=V.strConcat=V.addCodeArg=V.str=V._=V.nil=V._Code=V.Name=V.IDENTIFIER=V._CodeOrName=void 0;var Zt=class{};V._CodeOrName=Zt;V.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ot=class extends Zt{constructor(e){if(super(),!V.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};V.Name=ot;var Ee=class extends Zt{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof ot&&(r[n.str]=(r[n.str]||0)+1),r),{})}};V._Code=Ee;V.nil=new Ee("");function ka(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Tn(r,e[n]),r.push(t[++n]);return new Ee(r)}V._=ka;var Pn=new Ee("+");function Ma(t,...e){let r=[Yt(t[0])],n=0;for(;n<e.length;)r.push(Pn),Tn(r,e[n]),r.push(Pn,Yt(t[++n]));return Vc(r),new Ee(r)}V.str=Ma;function Tn(t,e){e instanceof Ee?t.push(...e._items):e instanceof ot?t.push(e):t.push(Gc(e))}V.addCodeArg=Tn;function Vc(t){let e=1;for(;e<t.length-1;){if(t[e]===Pn){let r=Fc(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Fc(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ot||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ot))return`"${t}${e.slice(1)}`}function zc(t,e){return e.emptyStr()?t:t.emptyStr()?e:Ma`${t}${e}`}V.strConcat=zc;function Gc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Yt(Array.isArray(t)?t.join(","):t)}function Hc(t){return new Ee(Yt(t))}V.stringify=Hc;function Yt(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}V.safeStringify=Yt;function Kc(t){return typeof t=="string"&&V.IDENTIFIER.test(t)?new Ee(`.${t}`):ka`[${t}]`}V.getProperty=Kc;function Bc(t){if(typeof t=="string"&&V.IDENTIFIER.test(t))return new Ee(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}V.getEsmExportName=Bc;function Wc(t){return new Ee(t.toString())}V.regexpCode=Wc});var Cn=N(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.ValueScope=le.ValueScopeName=le.Scope=le.varKinds=le.UsedValueState=void 0;var pe=Qt(),Nn=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},In;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(In=le.UsedValueState||(le.UsedValueState={}));le.varKinds={const:new pe.Name("const"),let:new pe.Name("let"),var:new pe.Name("var")};var Rr=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof pe.Name?e:this.name(e)}name(e){return new pe.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};le.Scope=Rr;var Ar=class extends pe.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,pe._)`.${new pe.Name(r)}[${n}]`}};le.ValueScopeName=Ar;var Jc=(0,pe._)`\n`,On=class extends Rr{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Jc:pe.nil}}get(){return this._scope}name(e){return new Ar(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:a}=s,i=(n=r.key)!==null&&n!==void 0?n:r.ref,o=this._values[a];if(o){let f=o.get(i);if(f)return f}else o=this._values[a]=new Map;o.set(i,s);let l=this._scope[a]||(this._scope[a]=[]),d=l.length;return l[d]=r.ref,s.setValue(r,{property:a,itemIndex:d}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,pe._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let a=pe.nil;for(let i in e){let o=e[i];if(!o)continue;let l=n[i]=n[i]||new Map;o.forEach(d=>{if(l.has(d))return;l.set(d,In.Started);let f=r(d);if(f){let m=this.opts.es5?le.varKinds.var:le.varKinds.const;a=(0,pe._)`${a}${m} ${d} = ${f};${this.opts._n}`}else if(f=s?.(d))a=(0,pe._)`${a}${f}${this.opts._n}`;else throw new Nn(d);l.set(d,In.Completed)})}return a}};le.ValueScope=On});var q=N(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.or=M.and=M.not=M.CodeGen=M.operators=M.varKinds=M.ValueScopeName=M.ValueScope=M.Scope=M.Name=M.regexpCode=M.stringify=M.getProperty=M.nil=M.strConcat=M.str=M._=void 0;var j=Qt(),Te=Cn(),Je=Qt();Object.defineProperty(M,"_",{enumerable:!0,get:function(){return Je._}});Object.defineProperty(M,"str",{enumerable:!0,get:function(){return Je.str}});Object.defineProperty(M,"strConcat",{enumerable:!0,get:function(){return Je.strConcat}});Object.defineProperty(M,"nil",{enumerable:!0,get:function(){return Je.nil}});Object.defineProperty(M,"getProperty",{enumerable:!0,get:function(){return Je.getProperty}});Object.defineProperty(M,"stringify",{enumerable:!0,get:function(){return Je.stringify}});Object.defineProperty(M,"regexpCode",{enumerable:!0,get:function(){return Je.regexpCode}});Object.defineProperty(M,"Name",{enumerable:!0,get:function(){return Je.Name}});var qr=Cn();Object.defineProperty(M,"Scope",{enumerable:!0,get:function(){return qr.Scope}});Object.defineProperty(M,"ValueScope",{enumerable:!0,get:function(){return qr.ValueScope}});Object.defineProperty(M,"ValueScopeName",{enumerable:!0,get:function(){return qr.ValueScopeName}});Object.defineProperty(M,"varKinds",{enumerable:!0,get:function(){return qr.varKinds}});M.operators={GT:new j._Code(">"),GTE:new j._Code(">="),LT:new j._Code("<"),LTE:new j._Code("<="),EQ:new j._Code("==="),NEQ:new j._Code("!=="),NOT:new j._Code("!"),OR:new j._Code("||"),AND:new j._Code("&&"),ADD:new j._Code("+")};var He=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Rn=class extends He{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Te.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=It(this.rhs,e,r)),this}get names(){return this.rhs instanceof j._CodeOrName?this.rhs.names:{}}},kr=class extends He{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof j.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=It(this.rhs,e,r),this}get names(){let e=this.lhs instanceof j.Name?{}:{...this.lhs.names};return Dr(e,this.rhs)}},An=class extends kr{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},kn=class extends He{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Mn=class extends He{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Dn=class extends He{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},qn=class extends He{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=It(this.code,e,r),this}get names(){return this.code instanceof j._CodeOrName?this.code.names:{}}},Xt=class extends He{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let a=n[s];a.optimizeNames(e,r)||(Zc(e,a.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>lt(e,r.names),{})}},Ke=class extends Xt{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},jn=class extends Xt{},Nt=class extends Ke{};Nt.kind="else";var ct=class t extends Ke{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Nt(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(Da(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=It(this.condition,e,r),this}get names(){let e=super.names;return Dr(e,this.condition),this.else&&lt(e,this.else.names),e}};ct.kind="if";var ut=class extends Ke{};ut.kind="for";var xn=class extends ut{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=It(this.iteration,e,r),this}get names(){return lt(super.names,this.iteration.names)}},Ln=class extends ut{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Te.varKinds.var:this.varKind,{name:n,from:s,to:a}=this;return`for(${r} ${n}=${s}; ${n}<${a}; ${n}++)`+super.render(e)}get names(){let e=Dr(super.names,this.from);return Dr(e,this.to)}},Mr=class extends ut{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=It(this.iterable,e,r),this}get names(){return lt(super.names,this.iterable.names)}},er=class extends Ke{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};er.kind="func";var tr=class extends Xt{render(e){return"return "+super.render(e)}};tr.kind="return";var Un=class extends Ke{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&lt(e,this.catch.names),this.finally&&lt(e,this.finally.names),e}},rr=class extends Ke{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};rr.kind="catch";var nr=class extends Ke{render(e){return"finally"+super.render(e)}};nr.kind="finally";var Vn=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Te.Scope({parent:e}),this._nodes=[new jn]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let a=this._scope.toName(r);return n!==void 0&&s&&(this._constants[a.str]=n),this._leafNode(new Rn(e,a,n)),a}const(e,r,n){return this._def(Te.varKinds.const,e,r,n)}let(e,r,n){return this._def(Te.varKinds.let,e,r,n)}var(e,r,n){return this._def(Te.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new kr(e,r,n))}add(e,r){return this._leafNode(new An(e,M.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==j.nil&&this._leafNode(new qn(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,j.addCodeArg)(r,s));return r.push("}"),new j._Code(r)}if(e,r,n){if(this._blockNode(new ct(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ct(e))}else(){return this._elseNode(new Nt)}endIf(){return this._endBlockNode(ct,Nt)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new xn(e),r)}forRange(e,r,n,s,a=this.opts.es5?Te.varKinds.var:Te.varKinds.let){let i=this._scope.toName(e);return this._for(new Ln(a,i,r,n),()=>s(i))}forOf(e,r,n,s=Te.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let i=r instanceof j.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,j._)`${i}.length`,o=>{this.var(a,(0,j._)`${i}[${o}]`),n(a)})}return this._for(new Mr("of",s,a,r),()=>n(a))}forIn(e,r,n,s=this.opts.es5?Te.varKinds.var:Te.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,j._)`Object.keys(${r})`,n);let a=this._scope.toName(e);return this._for(new Mr("in",s,a,r),()=>n(a))}endFor(){return this._endBlockNode(ut)}label(e){return this._leafNode(new kn(e))}break(e){return this._leafNode(new Mn(e))}return(e){let r=new tr;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(tr)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Un;if(this._blockNode(s),this.code(e),r){let a=this.name("e");this._currNode=s.catch=new rr(a),r(a)}return n&&(this._currNode=s.finally=new nr,this.code(n)),this._endBlockNode(rr,nr)}throw(e){return this._leafNode(new Dn(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=j.nil,n,s){return this._blockNode(new er(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(er)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ct))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};M.CodeGen=Vn;function lt(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Dr(t,e){return e instanceof j._CodeOrName?lt(t,e.names):t}function It(t,e,r){if(t instanceof j.Name)return n(t);if(!s(t))return t;return new j._Code(t._items.reduce((a,i)=>(i instanceof j.Name&&(i=n(i)),i instanceof j._Code?a.push(...i._items):a.push(i),a),[]));function n(a){let i=r[a.str];return i===void 0||e[a.str]!==1?a:(delete e[a.str],i)}function s(a){return a instanceof j._Code&&a._items.some(i=>i instanceof j.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Zc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Da(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,j._)`!${Fn(t)}`}M.not=Da;var Yc=qa(M.operators.AND);function Qc(...t){return t.reduce(Yc)}M.and=Qc;var Xc=qa(M.operators.OR);function eu(...t){return t.reduce(Xc)}M.or=eu;function qa(t){return(e,r)=>e===j.nil?r:r===j.nil?e:(0,j._)`${Fn(e)} ${t} ${Fn(r)}`}function Fn(t){return t instanceof j.Name?t:(0,j._)`(${t})`}});var F=N(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.checkStrictMode=D.getErrorPath=D.Type=D.useFunc=D.setEvaluated=D.evaluatedPropsToName=D.mergeEvaluated=D.eachItem=D.unescapeJsonPointer=D.escapeJsonPointer=D.escapeFragment=D.unescapeFragment=D.schemaRefOrVal=D.schemaHasRulesButRef=D.schemaHasRules=D.checkUnknownRules=D.alwaysValidSchema=D.toHash=void 0;var J=q(),tu=Qt();function ru(t){let e={};for(let r of t)e[r]=!0;return e}D.toHash=ru;function nu(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(La(t,e),!Ua(e,t.self.RULES.all))}D.alwaysValidSchema=nu;function La(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let a in e)s[a]||Ga(t,`unknown keyword: "${a}"`)}D.checkUnknownRules=La;function Ua(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}D.schemaHasRules=Ua;function su(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}D.schemaHasRulesButRef=su;function au({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,J._)`${r}`}return(0,J._)`${t}${e}${(0,J.getProperty)(n)}`}D.schemaRefOrVal=au;function iu(t){return Va(decodeURIComponent(t))}D.unescapeFragment=iu;function ou(t){return encodeURIComponent(zn(t))}D.escapeFragment=ou;function zn(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}D.escapeJsonPointer=zn;function Va(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}D.unescapeJsonPointer=Va;function cu(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}D.eachItem=cu;function ja({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,a,i,o)=>{let l=i===void 0?a:i instanceof J.Name?(a instanceof J.Name?t(s,a,i):e(s,a,i),i):a instanceof J.Name?(e(s,i,a),a):r(a,i);return o===J.Name&&!(l instanceof J.Name)?n(s,l):l}}D.mergeEvaluated={props:ja({mergeNames:(t,e,r)=>t.if((0,J._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,J._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,J._)`${r} || {}`).code((0,J._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,J._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,J._)`${r} || {}`),Gn(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Fa}),items:ja({mergeNames:(t,e,r)=>t.if((0,J._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,J._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,J._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,J._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Fa(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,J._)`{}`);return e!==void 0&&Gn(t,r,e),r}D.evaluatedPropsToName=Fa;function Gn(t,e,r){Object.keys(r).forEach(n=>t.assign((0,J._)`${e}${(0,J.getProperty)(n)}`,!0))}D.setEvaluated=Gn;var xa={};function uu(t,e){return t.scopeValue("func",{ref:e,code:xa[e.code]||(xa[e.code]=new tu._Code(e.code))})}D.useFunc=uu;var za;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(za=D.Type||(D.Type={}));function lu(t,e,r){if(t instanceof J.Name){let n=e===za.Num;return r?n?(0,J._)`"[" + ${t} + "]"`:(0,J._)`"['" + ${t} + "']"`:n?(0,J._)`"/" + ${t}`:(0,J._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,J.getProperty)(t).toString():"/"+zn(t)}D.getErrorPath=lu;function Ga(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}D.checkStrictMode=Ga});var Be=N(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});var ce=q(),du={data:new ce.Name("data"),valCxt:new ce.Name("valCxt"),instancePath:new ce.Name("instancePath"),parentData:new ce.Name("parentData"),parentDataProperty:new ce.Name("parentDataProperty"),rootData:new ce.Name("rootData"),dynamicAnchors:new ce.Name("dynamicAnchors"),vErrors:new ce.Name("vErrors"),errors:new ce.Name("errors"),this:new ce.Name("this"),self:new ce.Name("self"),scope:new ce.Name("scope"),json:new ce.Name("json"),jsonPos:new ce.Name("jsonPos"),jsonLen:new ce.Name("jsonLen"),jsonPart:new ce.Name("jsonPart")};Hn.default=du});var sr=N(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.extendErrors=ue.resetErrorsCount=ue.reportExtraError=ue.reportError=ue.keyword$DataError=ue.keywordError=void 0;var L=q(),jr=F(),de=Be();ue.keywordError={message:({keyword:t})=>(0,L.str)`must pass "${t}" keyword validation`};ue.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,L.str)`"${t}" keyword must be ${e} ($data)`:(0,L.str)`"${t}" keyword is invalid ($data)`};function fu(t,e=ue.keywordError,r,n){let{it:s}=t,{gen:a,compositeRule:i,allErrors:o}=s,l=Ba(t,e,r);n??(i||o)?Ha(a,l):Ka(s,(0,L._)`[${l}]`)}ue.reportError=fu;function pu(t,e=ue.keywordError,r){let{it:n}=t,{gen:s,compositeRule:a,allErrors:i}=n,o=Ba(t,e,r);Ha(s,o),a||i||Ka(n,de.default.vErrors)}ue.reportExtraError=pu;function mu(t,e){t.assign(de.default.errors,e),t.if((0,L._)`${de.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,L._)`${de.default.vErrors}.length`,e),()=>t.assign(de.default.vErrors,null)))}ue.resetErrorsCount=mu;function hu({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:a}){if(s===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",s,de.default.errors,o=>{t.const(i,(0,L._)`${de.default.vErrors}[${o}]`),t.if((0,L._)`${i}.instancePath === undefined`,()=>t.assign((0,L._)`${i}.instancePath`,(0,L.strConcat)(de.default.instancePath,a.errorPath))),t.assign((0,L._)`${i}.schemaPath`,(0,L.str)`${a.errSchemaPath}/${e}`),a.opts.verbose&&(t.assign((0,L._)`${i}.schema`,r),t.assign((0,L._)`${i}.data`,n))})}ue.extendErrors=hu;function Ha(t,e){let r=t.const("err",e);t.if((0,L._)`${de.default.vErrors} === null`,()=>t.assign(de.default.vErrors,(0,L._)`[${r}]`),(0,L._)`${de.default.vErrors}.push(${r})`),t.code((0,L._)`${de.default.errors}++`)}function Ka(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,L._)`new ${t.ValidationError}(${e})`):(r.assign((0,L._)`${n}.errors`,e),r.return(!1))}var dt={keyword:new L.Name("keyword"),schemaPath:new L.Name("schemaPath"),params:new L.Name("params"),propertyName:new L.Name("propertyName"),message:new L.Name("message"),schema:new L.Name("schema"),parentSchema:new L.Name("parentSchema")};function Ba(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,L._)`{}`:yu(t,e,r)}function yu(t,e,r={}){let{gen:n,it:s}=t,a=[vu(s,r),gu(t,r)];return _u(t,e,a),n.object(...a)}function vu({errorPath:t},{instancePath:e}){let r=e?(0,L.str)`${t}${(0,jr.getErrorPath)(e,jr.Type.Str)}`:t;return[de.default.instancePath,(0,L.strConcat)(de.default.instancePath,r)]}function gu({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,L.str)`${e}/${t}`;return r&&(s=(0,L.str)`${s}${(0,jr.getErrorPath)(r,jr.Type.Str)}`),[dt.schemaPath,s]}function _u(t,{params:e,message:r},n){let{keyword:s,data:a,schemaValue:i,it:o}=t,{opts:l,propertyName:d,topSchemaRef:f,schemaPath:m}=o;n.push([dt.keyword,s],[dt.params,typeof e=="function"?e(t):e||(0,L._)`{}`]),l.messages&&n.push([dt.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([dt.schema,i],[dt.parentSchema,(0,L._)`${f}${m}`],[de.default.data,a]),d&&n.push([dt.propertyName,d])}});var Ja=N(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.boolOrEmptySchema=Ot.topBoolOrEmptySchema=void 0;var $u=sr(),Eu=q(),wu=Be(),bu={message:"boolean schema is false"};function Su(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Wa(t,!1):typeof r=="object"&&r.$async===!0?e.return(wu.default.data):(e.assign((0,Eu._)`${n}.errors`,null),e.return(!0))}Ot.topBoolOrEmptySchema=Su;function Pu(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Wa(t)):r.var(e,!0)}Ot.boolOrEmptySchema=Pu;function Wa(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,$u.reportError)(s,bu,void 0,e)}});var Kn=N(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getRules=Ct.isJSONType=void 0;var Tu=["string","number","integer","boolean","null","object","array"],Nu=new Set(Tu);function Iu(t){return typeof t=="string"&&Nu.has(t)}Ct.isJSONType=Iu;function Ou(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Ct.getRules=Ou});var Bn=N(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.shouldUseRule=Ze.shouldUseGroup=Ze.schemaHasRulesForType=void 0;function Cu({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Za(t,n)}Ze.schemaHasRulesForType=Cu;function Za(t,e){return e.rules.some(r=>Ya(t,r))}Ze.shouldUseGroup=Za;function Ya(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Ze.shouldUseRule=Ya});var ir=N(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.reportTypeError=se.checkDataTypes=se.checkDataType=se.coerceAndCheckDataType=se.getJSONTypes=se.getSchemaTypes=se.DataType=void 0;var Ru=Kn(),Au=Bn(),ku=sr(),k=q(),Qa=F(),ar;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(ar=se.DataType||(se.DataType={}));function Mu(t){let e=Xa(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}se.getSchemaTypes=Mu;function Xa(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Ru.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}se.getJSONTypes=Xa;function Du(t,e){let{gen:r,data:n,opts:s}=t,a=qu(e,s.coerceTypes),i=e.length>0&&!(a.length===0&&e.length===1&&(0,Au.schemaHasRulesForType)(t,e[0]));if(i){let o=Jn(e,n,s.strictNumbers,ar.Wrong);r.if(o,()=>{a.length?ju(t,e,a):Zn(t)})}return i}se.coerceAndCheckDataType=Du;var ei=new Set(["string","number","integer","boolean","null"]);function qu(t,e){return e?t.filter(r=>ei.has(r)||e==="array"&&r==="array"):[]}function ju(t,e,r){let{gen:n,data:s,opts:a}=t,i=n.let("dataType",(0,k._)`typeof ${s}`),o=n.let("coerced",(0,k._)`undefined`);a.coerceTypes==="array"&&n.if((0,k._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,k._)`${s}[0]`).assign(i,(0,k._)`typeof ${s}`).if(Jn(e,s,a.strictNumbers),()=>n.assign(o,s))),n.if((0,k._)`${o} !== undefined`);for(let d of r)(ei.has(d)||d==="array"&&a.coerceTypes==="array")&&l(d);n.else(),Zn(t),n.endIf(),n.if((0,k._)`${o} !== undefined`,()=>{n.assign(s,o),xu(t,o)});function l(d){switch(d){case"string":n.elseIf((0,k._)`${i} == "number" || ${i} == "boolean"`).assign(o,(0,k._)`"" + ${s}`).elseIf((0,k._)`${s} === null`).assign(o,(0,k._)`""`);return;case"number":n.elseIf((0,k._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(o,(0,k._)`+${s}`);return;case"integer":n.elseIf((0,k._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(o,(0,k._)`+${s}`);return;case"boolean":n.elseIf((0,k._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(o,!1).elseIf((0,k._)`${s} === "true" || ${s} === 1`).assign(o,!0);return;case"null":n.elseIf((0,k._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(o,null);return;case"array":n.elseIf((0,k._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(o,(0,k._)`[${s}]`)}}}function xu({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,k._)`${e} !== undefined`,()=>t.assign((0,k._)`${e}[${r}]`,n))}function Wn(t,e,r,n=ar.Correct){let s=n===ar.Correct?k.operators.EQ:k.operators.NEQ,a;switch(t){case"null":return(0,k._)`${e} ${s} null`;case"array":a=(0,k._)`Array.isArray(${e})`;break;case"object":a=(0,k._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=i((0,k._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=i();break;default:return(0,k._)`typeof ${e} ${s} ${t}`}return n===ar.Correct?a:(0,k.not)(a);function i(o=k.nil){return(0,k.and)((0,k._)`typeof ${e} == "number"`,o,r?(0,k._)`isFinite(${e})`:k.nil)}}se.checkDataType=Wn;function Jn(t,e,r,n){if(t.length===1)return Wn(t[0],e,r,n);let s,a=(0,Qa.toHash)(t);if(a.array&&a.object){let i=(0,k._)`typeof ${e} != "object"`;s=a.null?i:(0,k._)`!${e} || ${i}`,delete a.null,delete a.array,delete a.object}else s=k.nil;a.number&&delete a.integer;for(let i in a)s=(0,k.and)(s,Wn(i,e,r,n));return s}se.checkDataTypes=Jn;var Lu={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,k._)`{type: ${t}}`:(0,k._)`{type: ${e}}`};function Zn(t){let e=Uu(t);(0,ku.reportError)(e,Lu)}se.reportTypeError=Zn;function Uu(t){let{gen:e,data:r,schema:n}=t,s=(0,Qa.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var ri=N(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.assignDefaults=void 0;var Rt=q(),Vu=F();function Fu(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)ti(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,a)=>ti(t,a,s.default))}xr.assignDefaults=Fu;function ti(t,e,r){let{gen:n,compositeRule:s,data:a,opts:i}=t;if(r===void 0)return;let o=(0,Rt._)`${a}${(0,Rt.getProperty)(e)}`;if(s){(0,Vu.checkStrictMode)(t,`default is ignored for: ${o}`);return}let l=(0,Rt._)`${o} === undefined`;i.useDefaults==="empty"&&(l=(0,Rt._)`${l} || ${o} === null || ${o} === ""`),n.if(l,(0,Rt._)`${o} = ${(0,Rt.stringify)(r)}`)}});var we=N(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.validateUnion=B.validateArray=B.usePattern=B.callValidateCode=B.schemaProperties=B.allSchemaProperties=B.noPropertyInData=B.propertyInData=B.isOwnProperty=B.hasPropFunc=B.reportMissingProp=B.checkMissingProp=B.checkReportMissingProp=void 0;var Z=q(),Yn=F(),Ye=Be(),zu=F();function Gu(t,e){let{gen:r,data:n,it:s}=t;r.if(Xn(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Z._)`${e}`},!0),t.error()})}B.checkReportMissingProp=Gu;function Hu({gen:t,data:e,it:{opts:r}},n,s){return(0,Z.or)(...n.map(a=>(0,Z.and)(Xn(t,e,a,r.ownProperties),(0,Z._)`${s} = ${a}`)))}B.checkMissingProp=Hu;function Ku(t,e){t.setParams({missingProperty:e},!0),t.error()}B.reportMissingProp=Ku;function ni(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Z._)`Object.prototype.hasOwnProperty`})}B.hasPropFunc=ni;function Qn(t,e,r){return(0,Z._)`${ni(t)}.call(${e}, ${r})`}B.isOwnProperty=Qn;function Bu(t,e,r,n){let s=(0,Z._)`${e}${(0,Z.getProperty)(r)} !== undefined`;return n?(0,Z._)`${s} && ${Qn(t,e,r)}`:s}B.propertyInData=Bu;function Xn(t,e,r,n){let s=(0,Z._)`${e}${(0,Z.getProperty)(r)} === undefined`;return n?(0,Z.or)(s,(0,Z.not)(Qn(t,e,r))):s}B.noPropertyInData=Xn;function si(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}B.allSchemaProperties=si;function Wu(t,e){return si(e).filter(r=>!(0,Yn.alwaysValidSchema)(t,e[r]))}B.schemaProperties=Wu;function Ju({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:a},it:i},o,l,d){let f=d?(0,Z._)`${t}, ${e}, ${n}${s}`:e,m=[[Ye.default.instancePath,(0,Z.strConcat)(Ye.default.instancePath,a)],[Ye.default.parentData,i.parentData],[Ye.default.parentDataProperty,i.parentDataProperty],[Ye.default.rootData,Ye.default.rootData]];i.opts.dynamicRef&&m.push([Ye.default.dynamicAnchors,Ye.default.dynamicAnchors]);let w=(0,Z._)`${f}, ${r.object(...m)}`;return l!==Z.nil?(0,Z._)`${o}.call(${l}, ${w})`:(0,Z._)`${o}(${w})`}B.callValidateCode=Ju;var Zu=(0,Z._)`new RegExp`;function Yu({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,a=s(r,n);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,Z._)`${s.code==="new RegExp"?Zu:(0,zu.useFunc)(t,s)}(${r}, ${n})`})}B.usePattern=Yu;function Qu(t){let{gen:e,data:r,keyword:n,it:s}=t,a=e.name("valid");if(s.allErrors){let o=e.let("valid",!0);return i(()=>e.assign(o,!1)),o}return e.var(a,!0),i(()=>e.break()),a;function i(o){let l=e.const("len",(0,Z._)`${r}.length`);e.forRange("i",0,l,d=>{t.subschema({keyword:n,dataProp:d,dataPropType:Yn.Type.Num},a),e.if((0,Z.not)(a),o)})}}B.validateArray=Qu;function Xu(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,Yn.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let i=e.let("valid",!1),o=e.name("_valid");e.block(()=>r.forEach((l,d)=>{let f=t.subschema({keyword:n,schemaProp:d,compositeRule:!0},o);e.assign(i,(0,Z._)`${i} || ${o}`),t.mergeValidEvaluated(f,o)||e.if((0,Z.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}B.validateUnion=Xu});var oi=N(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.validateKeywordUsage=De.validSchemaType=De.funcKeywordCode=De.macroKeywordCode=void 0;var fe=q(),ft=Be(),el=we(),tl=sr();function rl(t,e){let{gen:r,keyword:n,schema:s,parentSchema:a,it:i}=t,o=e.macro.call(i.self,s,a,i),l=ii(r,n,o);i.opts.validateSchema!==!1&&i.self.validateSchema(o,!0);let d=r.name("valid");t.subschema({schema:o,schemaPath:fe.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}De.macroKeywordCode=rl;function nl(t,e){var r;let{gen:n,keyword:s,schema:a,parentSchema:i,$data:o,it:l}=t;al(l,e);let d=!o&&e.compile?e.compile.call(l.self,a,i,l):e.validate,f=ii(n,s,d),m=n.let("valid");t.block$data(m,w),t.ok((r=e.valid)!==null&&r!==void 0?r:m);function w(){if(e.errors===!1)v(),e.modifying&&ai(t),E(()=>t.error());else{let S=e.async?$():_();e.modifying&&ai(t),E(()=>sl(t,S))}}function $(){let S=n.let("ruleErrs",null);return n.try(()=>v((0,fe._)`await `),P=>n.assign(m,!1).if((0,fe._)`${P} instanceof ${l.ValidationError}`,()=>n.assign(S,(0,fe._)`${P}.errors`),()=>n.throw(P))),S}function _(){let S=(0,fe._)`${f}.errors`;return n.assign(S,null),v(fe.nil),S}function v(S=e.async?(0,fe._)`await `:fe.nil){let P=l.opts.passContext?ft.default.this:ft.default.self,I=!("compile"in e&&!o||e.schema===!1);n.assign(m,(0,fe._)`${S}${(0,el.callValidateCode)(t,f,P,I)}`,e.modifying)}function E(S){var P;n.if((0,fe.not)((P=e.valid)!==null&&P!==void 0?P:m),S)}}De.funcKeywordCode=nl;function ai(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,fe._)`${n.parentData}[${n.parentDataProperty}]`))}function sl(t,e){let{gen:r}=t;r.if((0,fe._)`Array.isArray(${e})`,()=>{r.assign(ft.default.vErrors,(0,fe._)`${ft.default.vErrors} === null ? ${e} : ${ft.default.vErrors}.concat(${e})`).assign(ft.default.errors,(0,fe._)`${ft.default.vErrors}.length`),(0,tl.extendErrors)(t)},()=>t.error())}function al({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ii(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,fe.stringify)(r)})}function il(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}De.validSchemaType=il;function ol({schema:t,opts:e,self:r,errSchemaPath:n},s,a){if(Array.isArray(s.keyword)?!s.keyword.includes(a):s.keyword!==a)throw new Error("ajv implementation error");let i=s.dependencies;if(i?.some(o=>!Object.prototype.hasOwnProperty.call(t,o)))throw new Error(`parent schema must have dependencies of ${a}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[a])){let l=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}De.validateKeywordUsage=ol});var ui=N(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.extendSubschemaMode=Qe.extendSubschemaData=Qe.getSubschema=void 0;var qe=q(),ci=F();function cl(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:a,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let o=t.schema[e];return r===void 0?{schema:o,schemaPath:(0,qe._)`${t.schemaPath}${(0,qe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[r],schemaPath:(0,qe._)`${t.schemaPath}${(0,qe.getProperty)(e)}${(0,qe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,ci.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||a===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}Qe.getSubschema=cl;function ul(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:a,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:o}=e;if(r!==void 0){let{errorPath:d,dataPathArr:f,opts:m}=e,w=o.let("data",(0,qe._)`${e.data}${(0,qe.getProperty)(r)}`,!0);l(w),t.errorPath=(0,qe.str)`${d}${(0,ci.getErrorPath)(r,n,m.jsPropertySyntax)}`,t.parentDataProperty=(0,qe._)`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){let d=s instanceof qe.Name?s:o.let("data",s,!0);l(d),i!==void 0&&(t.propertyName=i)}a&&(t.dataTypes=a);function l(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Qe.extendSubschemaData=ul;function ll(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:a}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=r}Qe.extendSubschemaMode=ll});var es=N((_m,li)=>{"use strict";li.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!==0;){var i=a[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var fi=N(($m,di)=>{"use strict";var Xe=di.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Lr(e,n,s,t,"",t)};Xe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Xe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Xe.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Xe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Lr(t,e,r,n,s,a,i,o,l,d){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,a,i,o,l,d);for(var f in n){var m=n[f];if(Array.isArray(m)){if(f in Xe.arrayKeywords)for(var w=0;w<m.length;w++)Lr(t,e,r,m[w],s+"/"+f+"/"+w,a,s,f,n,w)}else if(f in Xe.propsKeywords){if(m&&typeof m=="object")for(var $ in m)Lr(t,e,r,m[$],s+"/"+f+"/"+dl($),a,s,f,n,$)}else(f in Xe.keywords||t.allKeys&&!(f in Xe.skipKeywords))&&Lr(t,e,r,m,s+"/"+f,a,s,f,n)}r(n,s,a,i,o,l,d)}}function dl(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var or=N(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.getSchemaRefs=me.resolveUrl=me.normalizeId=me._getFullPath=me.getFullPath=me.inlineRef=void 0;var fl=F(),pl=es(),ml=fi(),hl=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function yl(t,e=!0){return typeof t=="boolean"?!0:e===!0?!ts(t):e?pi(t)<=e:!1}me.inlineRef=yl;var vl=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ts(t){for(let e in t){if(vl.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(ts)||typeof r=="object"&&ts(r))return!0}return!1}function pi(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!hl.has(r)&&(typeof t[r]=="object"&&(0,fl.eachItem)(t[r],n=>e+=pi(n)),e===1/0))return 1/0}return e}function mi(t,e="",r){r!==!1&&(e=At(e));let n=t.parse(e);return hi(t,n)}me.getFullPath=mi;function hi(t,e){return t.serialize(e).split("#")[0]+"#"}me._getFullPath=hi;var gl=/#\/?$/;function At(t){return t?t.replace(gl,""):""}me.normalizeId=At;function _l(t,e,r){return r=At(r),t.resolve(e,r)}me.resolveUrl=_l;var $l=/^[a-z_][-a-z0-9._]*$/i;function El(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=At(t[r]||e),a={"":s},i=mi(n,s,!1),o={},l=new Set;return ml(t,{allKeys:!0},(m,w,$,_)=>{if(_===void 0)return;let v=i+w,E=a[_];typeof m[r]=="string"&&(E=S.call(this,m[r])),P.call(this,m.$anchor),P.call(this,m.$dynamicAnchor),a[w]=E;function S(I){let b=this.opts.uriResolver.resolve;if(I=At(E?b(E,I):I),l.has(I))throw f(I);l.add(I);let g=this.refs[I];return typeof g=="string"&&(g=this.refs[g]),typeof g=="object"?d(m,g.schema,I):I!==At(v)&&(I[0]==="#"?(d(m,o[I],I),o[I]=m):this.refs[I]=v),I}function P(I){if(typeof I=="string"){if(!$l.test(I))throw new Error(`invalid anchor "${I}"`);S.call(this,`#${I}`)}}}),o;function d(m,w,$){if(w!==void 0&&!pl(m,w))throw f($)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}me.getSchemaRefs=El});var lr=N(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.getData=et.KeywordCxt=et.validateFunctionCode=void 0;var Ei=Ja(),yi=ir(),ns=Bn(),Ur=ir(),wl=ri(),ur=oi(),rs=ui(),O=q(),R=Be(),bl=or(),We=F(),cr=sr();function Sl(t){if(Si(t)&&(Pi(t),bi(t))){Nl(t);return}wi(t,()=>(0,Ei.topBoolOrEmptySchema)(t))}et.validateFunctionCode=Sl;function wi({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},a){s.code.es5?t.func(e,(0,O._)`${R.default.data}, ${R.default.valCxt}`,n.$async,()=>{t.code((0,O._)`"use strict"; ${vi(r,s)}`),Tl(t,s),t.code(a)}):t.func(e,(0,O._)`${R.default.data}, ${Pl(s)}`,n.$async,()=>t.code(vi(r,s)).code(a))}function Pl(t){return(0,O._)`{${R.default.instancePath}="", ${R.default.parentData}, ${R.default.parentDataProperty}, ${R.default.rootData}=${R.default.data}${t.dynamicRef?(0,O._)`, ${R.default.dynamicAnchors}={}`:O.nil}}={}`}function Tl(t,e){t.if(R.default.valCxt,()=>{t.var(R.default.instancePath,(0,O._)`${R.default.valCxt}.${R.default.instancePath}`),t.var(R.default.parentData,(0,O._)`${R.default.valCxt}.${R.default.parentData}`),t.var(R.default.parentDataProperty,(0,O._)`${R.default.valCxt}.${R.default.parentDataProperty}`),t.var(R.default.rootData,(0,O._)`${R.default.valCxt}.${R.default.rootData}`),e.dynamicRef&&t.var(R.default.dynamicAnchors,(0,O._)`${R.default.valCxt}.${R.default.dynamicAnchors}`)},()=>{t.var(R.default.instancePath,(0,O._)`""`),t.var(R.default.parentData,(0,O._)`undefined`),t.var(R.default.parentDataProperty,(0,O._)`undefined`),t.var(R.default.rootData,R.default.data),e.dynamicRef&&t.var(R.default.dynamicAnchors,(0,O._)`{}`)})}function Nl(t){let{schema:e,opts:r,gen:n}=t;wi(t,()=>{r.$comment&&e.$comment&&Ni(t),Al(t),n.let(R.default.vErrors,null),n.let(R.default.errors,0),r.unevaluated&&Il(t),Ti(t),Dl(t)})}function Il(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,O._)`${r}.evaluated`),e.if((0,O._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,O._)`${t.evaluated}.props`,(0,O._)`undefined`)),e.if((0,O._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,O._)`${t.evaluated}.items`,(0,O._)`undefined`))}function vi(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,O._)`/*# sourceURL=${r} */`:O.nil}function Ol(t,e){if(Si(t)&&(Pi(t),bi(t))){Cl(t,e);return}(0,Ei.boolOrEmptySchema)(t,e)}function bi({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Si(t){return typeof t.schema!="boolean"}function Cl(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&Ni(t),kl(t),Ml(t);let a=n.const("_errs",R.default.errors);Ti(t,a),n.var(e,(0,O._)`${a} === ${R.default.errors}`)}function Pi(t){(0,We.checkUnknownRules)(t),Rl(t)}function Ti(t,e){if(t.opts.jtd)return gi(t,[],!1,e);let r=(0,yi.getSchemaTypes)(t.schema),n=(0,yi.coerceAndCheckDataType)(t,r);gi(t,r,!n,e)}function Rl(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,We.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Al(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,We.checkStrictMode)(t,"default is ignored in the schema root")}function kl(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,bl.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Ml(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ni({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let a=r.$comment;if(s.$comment===!0)t.code((0,O._)`${R.default.self}.logger.log(${a})`);else if(typeof s.$comment=="function"){let i=(0,O.str)`${n}/$comment`,o=t.scopeValue("root",{ref:e.root});t.code((0,O._)`${R.default.self}.opts.$comment(${a}, ${i}, ${o}.schema)`)}}function Dl(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:a}=t;r.$async?e.if((0,O._)`${R.default.errors} === 0`,()=>e.return(R.default.data),()=>e.throw((0,O._)`new ${s}(${R.default.vErrors})`)):(e.assign((0,O._)`${n}.errors`,R.default.vErrors),a.unevaluated&&ql(t),e.return((0,O._)`${R.default.errors} === 0`))}function ql({gen:t,evaluated:e,props:r,items:n}){r instanceof O.Name&&t.assign((0,O._)`${e}.props`,r),n instanceof O.Name&&t.assign((0,O._)`${e}.items`,n)}function gi(t,e,r,n){let{gen:s,schema:a,data:i,allErrors:o,opts:l,self:d}=t,{RULES:f}=d;if(a.$ref&&(l.ignoreKeywordsWithRef||!(0,We.schemaHasRulesButRef)(a,f))){s.block(()=>Ii(t,"$ref",f.all.$ref.definition));return}l.jtd||jl(t,e),s.block(()=>{for(let w of f.rules)m(w);m(f.post)});function m(w){(0,ns.shouldUseGroup)(a,w)&&(w.type?(s.if((0,Ur.checkDataType)(w.type,i,l.strictNumbers)),_i(t,w),e.length===1&&e[0]===w.type&&r&&(s.else(),(0,Ur.reportTypeError)(t)),s.endIf()):_i(t,w),o||s.if((0,O._)`${R.default.errors} === ${n||0}`))}}function _i(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,wl.assignDefaults)(t,e.type),r.block(()=>{for(let a of e.rules)(0,ns.shouldUseRule)(n,a)&&Ii(t,a.keyword,a.definition,e.type)})}function jl(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(xl(t,e),t.opts.allowUnionTypes||Ll(t,e),Ul(t,t.dataTypes))}function xl(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{$i(t.dataTypes,r)||ss(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>$i(e,r))}}function Ll(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ss(t,"use allowUnionTypes to allow union type keyword")}function Ul(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,ns.shouldUseRule)(t.schema,s)){let{type:a}=s.definition;a.length&&!a.some(i=>Vl(e,i))&&ss(t,`missing type "${a.join(",")}" for keyword "${n}"`)}}}function Vl(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function $i(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ss(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,We.checkStrictMode)(t,e,t.opts.strictTypes)}var Vr=class{constructor(e,r,n){if((0,ur.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,We.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Oi(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ur.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",R.default.errors))}result(e,r,n){this.failResult((0,O.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,O.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,O._)`${r} !== undefined && (${(0,O.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?cr.reportExtraError:cr.reportError)(this,this.def.error,r)}$dataError(){(0,cr.reportError)(this,this.def.$dataError||cr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,cr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=O.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=O.nil,r=O.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:a,def:i}=this;n.if((0,O.or)((0,O._)`${s} === undefined`,r)),e!==O.nil&&n.assign(e,!0),(a.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==O.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:a}=this;return(0,O.or)(i(),o());function i(){if(n.length){if(!(r instanceof O.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,O._)`${(0,Ur.checkDataTypes)(l,r,a.opts.strictNumbers,Ur.DataType.Wrong)}`}return O.nil}function o(){if(s.validateSchema){let l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,O._)`!${l}(${r})`}return O.nil}}subschema(e,r){let n=(0,rs.getSubschema)(this.it,e);(0,rs.extendSubschemaData)(n,this.it,e),(0,rs.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Ol(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=We.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=We.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,O.Name)),!0}};et.KeywordCxt=Vr;function Ii(t,e,r,n){let s=new Vr(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ur.funcKeywordCode)(s,r):"macro"in r?(0,ur.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ur.funcKeywordCode)(s,r)}var Fl=/^\/(?:[^~]|~0|~1)*$/,zl=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Oi(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,a;if(t==="")return R.default.rootData;if(t[0]==="/"){if(!Fl.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,a=R.default.rootData}else{let d=zl.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(l("property/index",f));return n[e-f]}if(f>e)throw new Error(l("data",f));if(a=r[e-f],!s)return a}let i=a,o=s.split("/");for(let d of o)d&&(a=(0,O._)`${a}${(0,O.getProperty)((0,We.unescapeJsonPointer)(d))}`,i=(0,O._)`${i} && ${a}`);return i;function l(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}et.getData=Oi});var Fr=N(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});var as=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};is.default=as});var zr=N(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var os=or(),cs=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,os.resolveUrl)(e,r,n),this.missingSchema=(0,os.normalizeId)((0,os.getFullPath)(e,this.missingRef))}};us.default=cs});var Hr=N(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.resolveSchema=be.getCompilingSchema=be.resolveRef=be.compileSchema=be.SchemaEnv=void 0;var Ne=q(),Gl=Fr(),pt=Be(),Ie=or(),Ci=F(),Hl=lr(),kt=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ie.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};be.SchemaEnv=kt;function ds(t){let e=Ri.call(this,t);if(e)return e;let r=(0,Ie.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:a}=this.opts,i=new Ne.CodeGen(this.scope,{es5:n,lines:s,ownProperties:a}),o;t.$async&&(o=i.scopeValue("Error",{ref:Gl.default,code:(0,Ne._)`require("ajv/dist/runtime/validation_error").default`}));let l=i.scopeName("validate");t.validateName=l;let d={gen:i,allErrors:this.opts.allErrors,data:pt.default.data,parentData:pt.default.parentData,parentDataProperty:pt.default.parentDataProperty,dataNames:[pt.default.data],dataPathArr:[Ne.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ne.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ne.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ne._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),(0,Hl.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let m=i.toString();f=`${i.scopeRefs(pt.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let $=new Function(`${pt.default.self}`,`${pt.default.scope}`,f)(this,this.scope.get());if(this.scope.value(l,{ref:$}),$.errors=null,$.schema=t.schema,$.schemaEnv=t,t.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:l,validateCode:m,scopeValues:i._values}),this.opts.unevaluated){let{props:_,items:v}=d;$.evaluated={props:_ instanceof Ne.Name?void 0:_,items:v instanceof Ne.Name?void 0:v,dynamicProps:_ instanceof Ne.Name,dynamicItems:v instanceof Ne.Name},$.source&&($.source.evaluated=(0,Ne.stringify)($.evaluated))}return t.validate=$,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}be.compileSchema=ds;function Kl(t,e,r){var n;r=(0,Ie.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let a=Jl.call(this,t,r);if(a===void 0){let i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;i&&(a=new kt({schema:i,schemaId:o,root:t,baseId:e}))}if(a!==void 0)return t.refs[r]=Bl.call(this,a)}be.resolveRef=Kl;function Bl(t){return(0,Ie.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:ds.call(this,t)}function Ri(t){for(let e of this._compilations)if(Wl(e,t))return e}be.getCompilingSchema=Ri;function Wl(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Jl(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Gr.call(this,t,e)}function Gr(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ie._getFullPath)(this.opts.uriResolver,r),s=(0,Ie.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return ls.call(this,r,t);let a=(0,Ie.normalizeId)(n),i=this.refs[a]||this.schemas[a];if(typeof i=="string"){let o=Gr.call(this,t,i);return typeof o?.schema!="object"?void 0:ls.call(this,r,o)}if(typeof i?.schema=="object"){if(i.validate||ds.call(this,i),a===(0,Ie.normalizeId)(e)){let{schema:o}=i,{schemaId:l}=this.opts,d=o[l];return d&&(s=(0,Ie.resolveUrl)(this.opts.uriResolver,s,d)),new kt({schema:o,schemaId:l,root:t,baseId:s})}return ls.call(this,r,i)}}be.resolveSchema=Gr;var Zl=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ls(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let o of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,Ci.unescapeFragment)(o)];if(l===void 0)return;r=l;let d=typeof r=="object"&&r[this.opts.schemaId];!Zl.has(o)&&d&&(e=(0,Ie.resolveUrl)(this.opts.uriResolver,e,d))}let a;if(typeof r!="boolean"&&r.$ref&&!(0,Ci.schemaHasRulesButRef)(r,this.RULES)){let o=(0,Ie.resolveUrl)(this.opts.uriResolver,e,r.$ref);a=Gr.call(this,n,o)}let{schemaId:i}=this.opts;if(a=a||new kt({schema:r,schemaId:i,root:n,baseId:e}),a.schema!==a.root.schema)return a}});var Ai=N((Tm,Yl)=>{Yl.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Mi=N((Kr,ki)=>{(function(t,e){typeof Kr=="object"&&typeof ki<"u"?e(Kr):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Kr,function(t){"use strict";function e(){for(var u=arguments.length,c=Array(u),p=0;p<u;p++)c[p]=arguments[p];if(c.length>1){c[0]=c[0].slice(0,-1);for(var h=c.length-1,y=1;y<h;++y)c[y]=c[y].slice(1,-1);return c[h]=c[h].slice(1),c.join("")}else return c[0]}function r(u){return"(?:"+u+")"}function n(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function s(u){return u.toUpperCase()}function a(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function i(u,c){var p=u;if(c)for(var h in c)p[h]=c[h];return p}function o(u){var c="[A-Za-z]",p="[\\x0D]",h="[0-9]",y="[\\x22]",T=e(h,"[A-Fa-f]"),A="[\\x0A]",U="[\\x20]",G=r(r("%[EFef]"+T+"%"+T+T+"%"+T+T)+"|"+r("%[89A-Fa-f]"+T+"%"+T+T)+"|"+r("%"+T+T)),re="[\\:\\/\\?\\#\\[\\]\\@]",x="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Q=e(re,x),ne=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Y=u?"[\\uE000-\\uF8FF]":"[]",z=e(c,h,"[\\-\\.\\_\\~]",ne),X=r(c+e(c,h,"[\\+\\-\\.]")+"*"),K=r(r(G+"|"+e(z,x,"[\\:]"))+"*"),st=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("[1-9]"+h)+"|"+h),ye=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("0?[1-9]"+h)+"|0?0?"+h),_e=r(ye+"\\."+ye+"\\."+ye+"\\."+ye),W=r(T+"{1,4}"),ve=r(r(W+"\\:"+W)+"|"+_e),$e=r(r(W+"\\:")+"{6}"+ve),Me=r("\\:\\:"+r(W+"\\:")+"{5}"+ve),at=r(r(W)+"?\\:\\:"+r(W+"\\:")+"{4}"+ve),Ue=r(r(r(W+"\\:")+"{0,1}"+W)+"?\\:\\:"+r(W+"\\:")+"{3}"+ve),Ht=r(r(r(W+"\\:")+"{0,2}"+W)+"?\\:\\:"+r(W+"\\:")+"{2}"+ve),Tr=r(r(r(W+"\\:")+"{0,3}"+W)+"?\\:\\:"+W+"\\:"+ve),Nr=r(r(r(W+"\\:")+"{0,4}"+W)+"?\\:\\:"+ve),Et=r(r(r(W+"\\:")+"{0,5}"+W)+"?\\:\\:"+W),wt=r(r(r(W+"\\:")+"{0,6}"+W)+"?\\:\\:"),Ve=r([$e,Me,at,Ue,Ht,Tr,Nr,Et,wt].join("|")),bt=r(r(z+"|"+G)+"+"),wn=r(Ve+"\\%25"+bt),it=r(Ve+r("\\%25|\\%(?!"+T+"{2})")+bt),Pc=r("[vV]"+T+"+\\."+e(z,x,"[\\:]")+"+"),Tc=r("\\["+r(it+"|"+Ve+"|"+Pc)+"\\]"),wa=r(r(G+"|"+e(z,x))+"*"),Kt=r(Tc+"|"+_e+"(?!"+wa+")|"+wa),Bt=r(h+"*"),ba=r(r(K+"@")+"?"+Kt+r("\\:"+Bt)+"?"),Wt=r(G+"|"+e(z,x,"[\\:\\@]")),Nc=r(Wt+"*"),Sa=r(Wt+"+"),Ic=r(r(G+"|"+e(z,x,"[\\@]"))+"+"),Fe=r(r("\\/"+Nc)+"*"),St=r("\\/"+r(Sa+Fe)+"?"),bn=r(Ic+Fe),Ir=r(Sa+Fe),Pt="(?!"+Wt+")",Up=r(Fe+"|"+St+"|"+bn+"|"+Ir+"|"+Pt),Tt=r(r(Wt+"|"+e("[\\/\\?]",Y))+"*"),Jt=r(r(Wt+"|[\\/\\?]")+"*"),Pa=r(r("\\/\\/"+ba+Fe)+"|"+St+"|"+Ir+"|"+Pt),Oc=r(X+"\\:"+Pa+r("\\?"+Tt)+"?"+r("\\#"+Jt)+"?"),Cc=r(r("\\/\\/"+ba+Fe)+"|"+St+"|"+bn+"|"+Pt),Rc=r(Cc+r("\\?"+Tt)+"?"+r("\\#"+Jt)+"?"),Vp=r(Oc+"|"+Rc),Fp=r(X+"\\:"+Pa+r("\\?"+Tt)+"?"),zp="^("+X+")\\:"+r(r("\\/\\/("+r("("+K+")@")+"?("+Kt+")"+r("\\:("+Bt+")")+"?)")+"?("+Fe+"|"+St+"|"+Ir+"|"+Pt+")")+r("\\?("+Tt+")")+"?"+r("\\#("+Jt+")")+"?$",Gp="^(){0}"+r(r("\\/\\/("+r("("+K+")@")+"?("+Kt+")"+r("\\:("+Bt+")")+"?)")+"?("+Fe+"|"+St+"|"+bn+"|"+Pt+")")+r("\\?("+Tt+")")+"?"+r("\\#("+Jt+")")+"?$",Hp="^("+X+")\\:"+r(r("\\/\\/("+r("("+K+")@")+"?("+Kt+")"+r("\\:("+Bt+")")+"?)")+"?("+Fe+"|"+St+"|"+Ir+"|"+Pt+")")+r("\\?("+Tt+")")+"?$",Kp="^"+r("\\#("+Jt+")")+"?$",Bp="^"+r("("+K+")@")+"?("+Kt+")"+r("\\:("+Bt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",c,h,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",z,x),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",z,x),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",z,x),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",z,x),"g"),NOT_QUERY:new RegExp(e("[^\\%]",z,x,"[\\:\\@\\/\\?]",Y),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",z,x,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",z,x),"g"),UNRESERVED:new RegExp(z,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",z,Q),"g"),PCT_ENCODED:new RegExp(G,"g"),IPV4ADDRESS:new RegExp("^("+_e+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ve+")"+r(r("\\%25|\\%(?!"+T+"{2})")+"("+bt+")")+"?\\]?$")}}var l=o(!1),d=o(!0),f=function(){function u(c,p){var h=[],y=!0,T=!1,A=void 0;try{for(var U=c[Symbol.iterator](),G;!(y=(G=U.next()).done)&&(h.push(G.value),!(p&&h.length===p));y=!0);}catch(re){T=!0,A=re}finally{try{!y&&U.return&&U.return()}finally{if(T)throw A}}return h}return function(c,p){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return u(c,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(u){if(Array.isArray(u)){for(var c=0,p=Array(u.length);c<u.length;c++)p[c]=u[c];return p}else return Array.from(u)},w=2147483647,$=36,_=1,v=26,E=38,S=700,P=72,I=128,b="-",g=/^xn--/,H=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,Ft={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},rt=$-_,oe=Math.floor,nt=String.fromCharCode;function Ce(u){throw new RangeError(Ft[u])}function Sr(u,c){for(var p=[],h=u.length;h--;)p[h]=c(u[h]);return p}function Pr(u,c){var p=u.split("@"),h="";p.length>1&&(h=p[0]+"@",u=p[1]),u=u.replace(C,".");var y=u.split("."),T=Sr(y,c).join(".");return h+T}function sa(u){for(var c=[],p=0,h=u.length;p<h;){var y=u.charCodeAt(p++);if(y>=55296&&y<=56319&&p<h){var T=u.charCodeAt(p++);(T&64512)==56320?c.push(((y&1023)<<10)+(T&1023)+65536):(c.push(y),p--)}else c.push(y)}return c}var tc=function(c){return String.fromCodePoint.apply(String,m(c))},rc=function(c){return c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:$},aa=function(c,p){return c+22+75*(c<26)-((p!=0)<<5)},ia=function(c,p,h){var y=0;for(c=h?oe(c/S):c>>1,c+=oe(c/p);c>rt*v>>1;y+=$)c=oe(c/rt);return oe(y+(rt+1)*c/(c+E))},oa=function(c){var p=[],h=c.length,y=0,T=I,A=P,U=c.lastIndexOf(b);U<0&&(U=0);for(var G=0;G<U;++G)c.charCodeAt(G)>=128&&Ce("not-basic"),p.push(c.charCodeAt(G));for(var re=U>0?U+1:0;re<h;){for(var x=y,Q=1,ne=$;;ne+=$){re>=h&&Ce("invalid-input");var Y=rc(c.charCodeAt(re++));(Y>=$||Y>oe((w-y)/Q))&&Ce("overflow"),y+=Y*Q;var z=ne<=A?_:ne>=A+v?v:ne-A;if(Y<z)break;var X=$-z;Q>oe(w/X)&&Ce("overflow"),Q*=X}var K=p.length+1;A=ia(y-x,K,x==0),oe(y/K)>w-T&&Ce("overflow"),T+=oe(y/K),y%=K,p.splice(y++,0,T)}return String.fromCodePoint.apply(String,p)},ca=function(c){var p=[];c=sa(c);var h=c.length,y=I,T=0,A=P,U=!0,G=!1,re=void 0;try{for(var x=c[Symbol.iterator](),Q;!(U=(Q=x.next()).done);U=!0){var ne=Q.value;ne<128&&p.push(nt(ne))}}catch(it){G=!0,re=it}finally{try{!U&&x.return&&x.return()}finally{if(G)throw re}}var Y=p.length,z=Y;for(Y&&p.push(b);z<h;){var X=w,K=!0,st=!1,ye=void 0;try{for(var _e=c[Symbol.iterator](),W;!(K=(W=_e.next()).done);K=!0){var ve=W.value;ve>=y&&ve<X&&(X=ve)}}catch(it){st=!0,ye=it}finally{try{!K&&_e.return&&_e.return()}finally{if(st)throw ye}}var $e=z+1;X-y>oe((w-T)/$e)&&Ce("overflow"),T+=(X-y)*$e,y=X;var Me=!0,at=!1,Ue=void 0;try{for(var Ht=c[Symbol.iterator](),Tr;!(Me=(Tr=Ht.next()).done);Me=!0){var Nr=Tr.value;if(Nr<y&&++T>w&&Ce("overflow"),Nr==y){for(var Et=T,wt=$;;wt+=$){var Ve=wt<=A?_:wt>=A+v?v:wt-A;if(Et<Ve)break;var bt=Et-Ve,wn=$-Ve;p.push(nt(aa(Ve+bt%wn,0))),Et=oe(bt/wn)}p.push(nt(aa(Et,0))),A=ia(T,$e,z==Y),T=0,++z}}}catch(it){at=!0,Ue=it}finally{try{!Me&&Ht.return&&Ht.return()}finally{if(at)throw Ue}}++T,++y}return p.join("")},nc=function(c){return Pr(c,function(p){return g.test(p)?oa(p.slice(4).toLowerCase()):p})},sc=function(c){return Pr(c,function(p){return H.test(p)?"xn--"+ca(p):p})},vt={version:"2.1.0",ucs2:{decode:sa,encode:tc},decode:oa,encode:ca,toASCII:sc,toUnicode:nc},ge={};function Re(u){var c=u.charCodeAt(0),p=void 0;return c<16?p="%0"+c.toString(16).toUpperCase():c<128?p="%"+c.toString(16).toUpperCase():c<2048?p="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase():p="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase(),p}function gt(u){for(var c="",p=0,h=u.length;p<h;){var y=parseInt(u.substr(p+1,2),16);if(y<128)c+=String.fromCharCode(y),p+=3;else if(y>=194&&y<224){if(h-p>=6){var T=parseInt(u.substr(p+4,2),16);c+=String.fromCharCode((y&31)<<6|T&63)}else c+=u.substr(p,6);p+=6}else if(y>=224){if(h-p>=9){var A=parseInt(u.substr(p+4,2),16),U=parseInt(u.substr(p+7,2),16);c+=String.fromCharCode((y&15)<<12|(A&63)<<6|U&63)}else c+=u.substr(p,9);p+=9}else c+=u.substr(p,3),p+=3}return c}function gn(u,c){function p(h){var y=gt(h);return y.match(c.UNRESERVED)?y:h}return u.scheme&&(u.scheme=String(u.scheme).replace(c.PCT_ENCODED,p).toLowerCase().replace(c.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(c.PCT_ENCODED,p).replace(c.NOT_USERINFO,Re).replace(c.PCT_ENCODED,s)),u.host!==void 0&&(u.host=String(u.host).replace(c.PCT_ENCODED,p).toLowerCase().replace(c.NOT_HOST,Re).replace(c.PCT_ENCODED,s)),u.path!==void 0&&(u.path=String(u.path).replace(c.PCT_ENCODED,p).replace(u.scheme?c.NOT_PATH:c.NOT_PATH_NOSCHEME,Re).replace(c.PCT_ENCODED,s)),u.query!==void 0&&(u.query=String(u.query).replace(c.PCT_ENCODED,p).replace(c.NOT_QUERY,Re).replace(c.PCT_ENCODED,s)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(c.PCT_ENCODED,p).replace(c.NOT_FRAGMENT,Re).replace(c.PCT_ENCODED,s)),u}function _n(u){return u.replace(/^0*(.*)/,"$1")||"0"}function $n(u,c){var p=u.match(c.IPV4ADDRESS)||[],h=f(p,2),y=h[1];return y?y.split(".").map(_n).join("."):u}function ua(u,c){var p=u.match(c.IPV6ADDRESS)||[],h=f(p,3),y=h[1],T=h[2];if(y){for(var A=y.toLowerCase().split("::").reverse(),U=f(A,2),G=U[0],re=U[1],x=re?re.split(":").map(_n):[],Q=G.split(":").map(_n),ne=c.IPV4ADDRESS.test(Q[Q.length-1]),Y=ne?7:8,z=Q.length-Y,X=Array(Y),K=0;K<Y;++K)X[K]=x[K]||Q[z+K]||"";ne&&(X[Y-1]=$n(X[Y-1],c));var st=X.reduce(function($e,Me,at){if(!Me||Me==="0"){var Ue=$e[$e.length-1];Ue&&Ue.index+Ue.length===at?Ue.length++:$e.push({index:at,length:1})}return $e},[]),ye=st.sort(function($e,Me){return Me.length-$e.length})[0],_e=void 0;if(ye&&ye.length>1){var W=X.slice(0,ye.index),ve=X.slice(ye.index+ye.length);_e=W.join(":")+"::"+ve.join(":")}else _e=X.join(":");return T&&(_e+="%"+T),_e}else return u}var ac=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ic="".match(/(){0}/)[1]===void 0;function xe(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p={},h=c.iri!==!1?d:l;c.reference==="suffix"&&(u=(c.scheme?c.scheme+":":"")+"//"+u);var y=u.match(ac);if(y){ic?(p.scheme=y[1],p.userinfo=y[3],p.host=y[4],p.port=parseInt(y[5],10),p.path=y[6]||"",p.query=y[7],p.fragment=y[8],isNaN(p.port)&&(p.port=y[5])):(p.scheme=y[1]||void 0,p.userinfo=u.indexOf("@")!==-1?y[3]:void 0,p.host=u.indexOf("//")!==-1?y[4]:void 0,p.port=parseInt(y[5],10),p.path=y[6]||"",p.query=u.indexOf("?")!==-1?y[7]:void 0,p.fragment=u.indexOf("#")!==-1?y[8]:void 0,isNaN(p.port)&&(p.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?y[4]:void 0)),p.host&&(p.host=ua($n(p.host,h),h)),p.scheme===void 0&&p.userinfo===void 0&&p.host===void 0&&p.port===void 0&&!p.path&&p.query===void 0?p.reference="same-document":p.scheme===void 0?p.reference="relative":p.fragment===void 0?p.reference="absolute":p.reference="uri",c.reference&&c.reference!=="suffix"&&c.reference!==p.reference&&(p.error=p.error||"URI is not a "+c.reference+" reference.");var T=ge[(c.scheme||p.scheme||"").toLowerCase()];if(!c.unicodeSupport&&(!T||!T.unicodeSupport)){if(p.host&&(c.domainHost||T&&T.domainHost))try{p.host=vt.toASCII(p.host.replace(h.PCT_ENCODED,gt).toLowerCase())}catch(A){p.error=p.error||"Host's domain name can not be converted to ASCII via punycode: "+A}gn(p,l)}else gn(p,h);T&&T.parse&&T.parse(p,c)}else p.error=p.error||"URI can not be parsed.";return p}function oc(u,c){var p=c.iri!==!1?d:l,h=[];return u.userinfo!==void 0&&(h.push(u.userinfo),h.push("@")),u.host!==void 0&&h.push(ua($n(String(u.host),p),p).replace(p.IPV6ADDRESS,function(y,T,A){return"["+T+(A?"%25"+A:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(h.push(":"),h.push(String(u.port))),h.length?h.join(""):void 0}var la=/^\.\.?\//,da=/^\/\.(\/|$)/,fa=/^\/\.\.(\/|$)/,cc=/^\/?(?:.|\n)*?(?=\/|$)/;function _t(u){for(var c=[];u.length;)if(u.match(la))u=u.replace(la,"");else if(u.match(da))u=u.replace(da,"/");else if(u.match(fa))u=u.replace(fa,"/"),c.pop();else if(u==="."||u==="..")u="";else{var p=u.match(cc);if(p){var h=p[0];u=u.slice(h.length),c.push(h)}else throw new Error("Unexpected dot segment condition")}return c.join("")}function Ae(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=c.iri?d:l,h=[],y=ge[(c.scheme||u.scheme||"").toLowerCase()];if(y&&y.serialize&&y.serialize(u,c),u.host&&!p.IPV6ADDRESS.test(u.host)){if(c.domainHost||y&&y.domainHost)try{u.host=c.iri?vt.toUnicode(u.host):vt.toASCII(u.host.replace(p.PCT_ENCODED,gt).toLowerCase())}catch(U){u.error=u.error||"Host's domain name can not be converted to "+(c.iri?"Unicode":"ASCII")+" via punycode: "+U}}gn(u,p),c.reference!=="suffix"&&u.scheme&&(h.push(u.scheme),h.push(":"));var T=oc(u,c);if(T!==void 0&&(c.reference!=="suffix"&&h.push("//"),h.push(T),u.path&&u.path.charAt(0)!=="/"&&h.push("/")),u.path!==void 0){var A=u.path;!c.absolutePath&&(!y||!y.absolutePath)&&(A=_t(A)),T===void 0&&(A=A.replace(/^\/\//,"/%2F")),h.push(A)}return u.query!==void 0&&(h.push("?"),h.push(u.query)),u.fragment!==void 0&&(h.push("#"),h.push(u.fragment)),h.join("")}function pa(u,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments[3],y={};return h||(u=xe(Ae(u,p),p),c=xe(Ae(c,p),p)),p=p||{},!p.tolerant&&c.scheme?(y.scheme=c.scheme,y.userinfo=c.userinfo,y.host=c.host,y.port=c.port,y.path=_t(c.path||""),y.query=c.query):(c.userinfo!==void 0||c.host!==void 0||c.port!==void 0?(y.userinfo=c.userinfo,y.host=c.host,y.port=c.port,y.path=_t(c.path||""),y.query=c.query):(c.path?(c.path.charAt(0)==="/"?y.path=_t(c.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?y.path="/"+c.path:u.path?y.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+c.path:y.path=c.path,y.path=_t(y.path)),y.query=c.query):(y.path=u.path,c.query!==void 0?y.query=c.query:y.query=u.query),y.userinfo=u.userinfo,y.host=u.host,y.port=u.port),y.scheme=u.scheme),y.fragment=c.fragment,y}function uc(u,c,p){var h=i({scheme:"null"},p);return Ae(pa(xe(u,h),xe(c,h),h,!0),h)}function lc(u,c){return typeof u=="string"?u=Ae(xe(u,c),c):n(u)==="object"&&(u=xe(Ae(u,c),c)),u}function dc(u,c,p){return typeof u=="string"?u=Ae(xe(u,p),p):n(u)==="object"&&(u=Ae(u,p)),typeof c=="string"?c=Ae(xe(c,p),p):n(c)==="object"&&(c=Ae(c,p)),u===c}function fc(u,c){return u&&u.toString().replace(!c||!c.iri?l.ESCAPE:d.ESCAPE,Re)}function Le(u,c){return u&&u.toString().replace(!c||!c.iri?l.PCT_ENCODED:d.PCT_ENCODED,gt)}var zt={scheme:"http",domainHost:!0,parse:function(c,p){return c.host||(c.error=c.error||"HTTP URIs must have a host."),c},serialize:function(c,p){var h=String(c.scheme).toLowerCase()==="https";return(c.port===(h?443:80)||c.port==="")&&(c.port=void 0),c.path||(c.path="/"),c}},ma={scheme:"https",domainHost:zt.domainHost,parse:zt.parse,serialize:zt.serialize};function ha(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var Gt={scheme:"ws",domainHost:!0,parse:function(c,p){var h=c;return h.secure=ha(h),h.resourceName=(h.path||"/")+(h.query?"?"+h.query:""),h.path=void 0,h.query=void 0,h},serialize:function(c,p){if((c.port===(ha(c)?443:80)||c.port==="")&&(c.port=void 0),typeof c.secure=="boolean"&&(c.scheme=c.secure?"wss":"ws",c.secure=void 0),c.resourceName){var h=c.resourceName.split("?"),y=f(h,2),T=y[0],A=y[1];c.path=T&&T!=="/"?T:void 0,c.query=A,c.resourceName=void 0}return c.fragment=void 0,c}},ya={scheme:"wss",domainHost:Gt.domainHost,parse:Gt.parse,serialize:Gt.serialize},pc={},mc=!0,va="[A-Za-z0-9\\-\\.\\_\\~"+(mc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",ke="[0-9A-Fa-f]",hc=r(r("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+r("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+r("%"+ke+ke)),yc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",vc="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",gc=e(vc,'[\\"\\\\]'),_c="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$c=new RegExp(va,"g"),$t=new RegExp(hc,"g"),Ec=new RegExp(e("[^]",yc,"[\\.]",'[\\"]',gc),"g"),ga=new RegExp(e("[^]",va,_c),"g"),wc=ga;function En(u){var c=gt(u);return c.match($c)?c:u}var _a={scheme:"mailto",parse:function(c,p){var h=c,y=h.to=h.path?h.path.split(","):[];if(h.path=void 0,h.query){for(var T=!1,A={},U=h.query.split("&"),G=0,re=U.length;G<re;++G){var x=U[G].split("=");switch(x[0]){case"to":for(var Q=x[1].split(","),ne=0,Y=Q.length;ne<Y;++ne)y.push(Q[ne]);break;case"subject":h.subject=Le(x[1],p);break;case"body":h.body=Le(x[1],p);break;default:T=!0,A[Le(x[0],p)]=Le(x[1],p);break}}T&&(h.headers=A)}h.query=void 0;for(var z=0,X=y.length;z<X;++z){var K=y[z].split("@");if(K[0]=Le(K[0]),p.unicodeSupport)K[1]=Le(K[1],p).toLowerCase();else try{K[1]=vt.toASCII(Le(K[1],p).toLowerCase())}catch(st){h.error=h.error||"Email address's domain name can not be converted to ASCII via punycode: "+st}y[z]=K.join("@")}return h},serialize:function(c,p){var h=c,y=a(c.to);if(y){for(var T=0,A=y.length;T<A;++T){var U=String(y[T]),G=U.lastIndexOf("@"),re=U.slice(0,G).replace($t,En).replace($t,s).replace(Ec,Re),x=U.slice(G+1);try{x=p.iri?vt.toUnicode(x):vt.toASCII(Le(x,p).toLowerCase())}catch(z){h.error=h.error||"Email address's domain name can not be converted to "+(p.iri?"Unicode":"ASCII")+" via punycode: "+z}y[T]=re+"@"+x}h.path=y.join(",")}var Q=c.headers=c.headers||{};c.subject&&(Q.subject=c.subject),c.body&&(Q.body=c.body);var ne=[];for(var Y in Q)Q[Y]!==pc[Y]&&ne.push(Y.replace($t,En).replace($t,s).replace(ga,Re)+"="+Q[Y].replace($t,En).replace($t,s).replace(wc,Re));return ne.length&&(h.query=ne.join("&")),h}},bc=/^([^\:]+)\:(.*)/,$a={scheme:"urn",parse:function(c,p){var h=c.path&&c.path.match(bc),y=c;if(h){var T=p.scheme||y.scheme||"urn",A=h[1].toLowerCase(),U=h[2],G=T+":"+(p.nid||A),re=ge[G];y.nid=A,y.nss=U,y.path=void 0,re&&(y=re.parse(y,p))}else y.error=y.error||"URN can not be parsed.";return y},serialize:function(c,p){var h=p.scheme||c.scheme||"urn",y=c.nid,T=h+":"+(p.nid||y),A=ge[T];A&&(c=A.serialize(c,p));var U=c,G=c.nss;return U.path=(y||p.nid)+":"+G,U}},Sc=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ea={scheme:"urn:uuid",parse:function(c,p){var h=c;return h.uuid=h.nss,h.nss=void 0,!p.tolerant&&(!h.uuid||!h.uuid.match(Sc))&&(h.error=h.error||"UUID is not valid."),h},serialize:function(c,p){var h=c;return h.nss=(c.uuid||"").toLowerCase(),h}};ge[zt.scheme]=zt,ge[ma.scheme]=ma,ge[Gt.scheme]=Gt,ge[ya.scheme]=ya,ge[_a.scheme]=_a,ge[$a.scheme]=$a,ge[Ea.scheme]=Ea,t.SCHEMES=ge,t.pctEncChar=Re,t.pctDecChars=gt,t.parse=xe,t.removeDotSegments=_t,t.serialize=Ae,t.resolveComponents=pa,t.resolve=uc,t.normalize=lc,t.equal=dc,t.escapeComponent=fc,t.unescapeComponent=Le,Object.defineProperty(t,"__esModule",{value:!0})})});var qi=N(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var Di=Mi();Di.code='require("ajv/dist/runtime/uri").default';fs.default=Di});var Gi=N(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.CodeGen=ae.Name=ae.nil=ae.stringify=ae.str=ae._=ae.KeywordCxt=void 0;var Ql=lr();Object.defineProperty(ae,"KeywordCxt",{enumerable:!0,get:function(){return Ql.KeywordCxt}});var Mt=q();Object.defineProperty(ae,"_",{enumerable:!0,get:function(){return Mt._}});Object.defineProperty(ae,"str",{enumerable:!0,get:function(){return Mt.str}});Object.defineProperty(ae,"stringify",{enumerable:!0,get:function(){return Mt.stringify}});Object.defineProperty(ae,"nil",{enumerable:!0,get:function(){return Mt.nil}});Object.defineProperty(ae,"Name",{enumerable:!0,get:function(){return Mt.Name}});Object.defineProperty(ae,"CodeGen",{enumerable:!0,get:function(){return Mt.CodeGen}});var Xl=Fr(),Vi=zr(),ed=Kn(),dr=Hr(),td=q(),fr=or(),Br=ir(),ms=F(),ji=Ai(),rd=qi(),Fi=(t,e)=>new RegExp(t,e);Fi.code="new RegExp";var nd=["removeAdditional","useDefaults","coerceTypes"],sd=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ad={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},id={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},xi=200;function od(t){var e,r,n,s,a,i,o,l,d,f,m,w,$,_,v,E,S,P,I,b,g,H,C,Ft,rt;let oe=t.strict,nt=(e=t.code)===null||e===void 0?void 0:e.optimize,Ce=nt===!0||nt===void 0?1:nt||0,Sr=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Fi,Pr=(s=t.uriResolver)!==null&&s!==void 0?s:rd.default;return{strictSchema:(i=(a=t.strictSchema)!==null&&a!==void 0?a:oe)!==null&&i!==void 0?i:!0,strictNumbers:(l=(o=t.strictNumbers)!==null&&o!==void 0?o:oe)!==null&&l!==void 0?l:!0,strictTypes:(f=(d=t.strictTypes)!==null&&d!==void 0?d:oe)!==null&&f!==void 0?f:"log",strictTuples:(w=(m=t.strictTuples)!==null&&m!==void 0?m:oe)!==null&&w!==void 0?w:"log",strictRequired:(_=($=t.strictRequired)!==null&&$!==void 0?$:oe)!==null&&_!==void 0?_:!1,code:t.code?{...t.code,optimize:Ce,regExp:Sr}:{optimize:Ce,regExp:Sr},loopRequired:(v=t.loopRequired)!==null&&v!==void 0?v:xi,loopEnum:(E=t.loopEnum)!==null&&E!==void 0?E:xi,meta:(S=t.meta)!==null&&S!==void 0?S:!0,messages:(P=t.messages)!==null&&P!==void 0?P:!0,inlineRefs:(I=t.inlineRefs)!==null&&I!==void 0?I:!0,schemaId:(b=t.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(g=t.addUsedSchema)!==null&&g!==void 0?g:!0,validateSchema:(H=t.validateSchema)!==null&&H!==void 0?H:!0,validateFormats:(C=t.validateFormats)!==null&&C!==void 0?C:!0,unicodeRegExp:(Ft=t.unicodeRegExp)!==null&&Ft!==void 0?Ft:!0,int32range:(rt=t.int32range)!==null&&rt!==void 0?rt:!0,uriResolver:Pr}}var pr=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...od(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new td.ValueScope({scope:{},prefixes:sd,es5:r,lines:n}),this.logger=pd(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,ed.getRules)(),Li.call(this,ad,e,"NOT SUPPORTED"),Li.call(this,id,e,"DEPRECATED","warn"),this._metaOpts=dd.call(this),e.formats&&ud.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&ld.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),cd.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=ji;n==="id"&&(s={...ji},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(f,m){await a.call(this,f.$schema);let w=this._addSchema(f,m);return w.validate||i.call(this,w)}async function a(f){f&&!this.getSchema(f)&&await s.call(this,{$ref:f},!0)}async function i(f){try{return this._compileSchemaEnv(f)}catch(m){if(!(m instanceof Vi.default))throw m;return o.call(this,m),await l.call(this,m.missingSchema),i.call(this,f)}}function o({missingSchema:f,missingRef:m}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${m} cannot be resolved`)}async function l(f){let m=await d.call(this,f);this.refs[f]||await a.call(this,m.$schema),this.refs[f]||this.addSchema(m,f,r)}async function d(f){let m=this._loading[f];if(m)return m;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,n,s);return this}let a;if(typeof e=="object"){let{schemaId:i}=this.opts;if(a=e[i],a!==void 0&&typeof a!="string")throw new Error(`schema ${i} must be string`)}return r=(0,fr.normalizeId)(r||a),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let a="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(a);else throw new Error(a)}return s}getSchema(e){let r;for(;typeof(r=Ui.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new dr.SchemaEnv({schema:{},schemaId:n});if(r=dr.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Ui.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,fr.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(hd.call(this,n,r),!r)return(0,ms.eachItem)(n,a=>ps.call(this,a)),this;vd.call(this,r);let s={...r,type:(0,Br.getJSONTypes)(r.type),schemaType:(0,Br.getJSONTypes)(r.schemaType)};return(0,ms.eachItem)(n,s.type.length===0?a=>ps.call(this,a,s):a=>s.type.forEach(i=>ps.call(this,a,s,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(a=>a.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,a)=>s+r+a)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let a=s.split("/").slice(1),i=e;for(let o of a)i=i[o];for(let o in n){let l=n[o];if(typeof l!="object")continue;let{$data:d}=l.definition,f=i[o];d&&f&&(i[o]=zi(f))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,a=this.opts.addUsedSchema){let i,{schemaId:o}=this.opts;if(typeof e=="object")i=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,fr.normalizeId)(i||n);let d=fr.getSchemaRefs.call(this,e,n);return l=new dr.SchemaEnv({schema:e,schemaId:o,meta:r,baseId:n,localRefs:d}),this._cache.set(l.schema,l),a&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),s&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):dr.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{dr.compileSchema.call(this,e)}finally{this.opts=r}}};ae.default=pr;pr.ValidationError=Xl.default;pr.MissingRefError=Vi.default;function Li(t,e,r,n="error"){for(let s in t){let a=s;a in e&&this.logger[n](`${r}: option ${s}. ${t[a]}`)}}function Ui(t){return t=(0,fr.normalizeId)(t),this.schemas[t]||this.refs[t]}function cd(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function ud(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function ld(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function dd(){let t={...this.opts};for(let e of nd)delete t[e];return t}var fd={log(){},warn(){},error(){}};function pd(t){if(t===!1)return fd;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var md=/^[a-z_$][a-z0-9_$:-]*$/i;function hd(t,e){let{RULES:r}=this;if((0,ms.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!md.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function ps(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:a}=this,i=s?a.post:a.rules.find(({type:l})=>l===r);if(i||(i={type:r,rules:[]},a.rules.push(i)),a.keywords[t]=!0,!e)return;let o={keyword:t,definition:{...e,type:(0,Br.getJSONTypes)(e.type),schemaType:(0,Br.getJSONTypes)(e.schemaType)}};e.before?yd.call(this,i,o,e.before):i.rules.push(o),a.all[t]=o,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function yd(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function vd(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=zi(e)),t.validateSchema=this.compile(e,!0))}var gd={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function zi(t){return{anyOf:[t,gd]}}});var Hi=N(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});var _d={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hs.default=_d});var Ji=N(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.callRef=mt.getValidate=void 0;var $d=zr(),Ki=we(),he=q(),Dt=Be(),Bi=Hr(),Wr=F(),Ed={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:a,validateName:i,opts:o,self:l}=n,{root:d}=a;if((r==="#"||r==="#/")&&s===d.baseId)return m();let f=Bi.resolveRef.call(l,d,s,r);if(f===void 0)throw new $d.default(n.opts.uriResolver,s,r);if(f instanceof Bi.SchemaEnv)return w(f);return $(f);function m(){if(a===d)return Jr(t,i,a,a.$async);let _=e.scopeValue("root",{ref:d});return Jr(t,(0,he._)`${_}.validate`,d,d.$async)}function w(_){let v=Wi(t,_);Jr(t,v,_,_.$async)}function $(_){let v=e.scopeValue("schema",o.code.source===!0?{ref:_,code:(0,he.stringify)(_)}:{ref:_}),E=e.name("valid"),S=t.subschema({schema:_,dataTypes:[],schemaPath:he.nil,topSchemaRef:v,errSchemaPath:r},E);t.mergeEvaluated(S),t.ok(E)}}};function Wi(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,he._)`${r.scopeValue("wrapper",{ref:e})}.validate`}mt.getValidate=Wi;function Jr(t,e,r,n){let{gen:s,it:a}=t,{allErrors:i,schemaEnv:o,opts:l}=a,d=l.passContext?Dt.default.this:he.nil;n?f():m();function f(){if(!o.$async)throw new Error("async schema referenced by sync schema");let _=s.let("valid");s.try(()=>{s.code((0,he._)`await ${(0,Ki.callValidateCode)(t,e,d)}`),$(e),i||s.assign(_,!0)},v=>{s.if((0,he._)`!(${v} instanceof ${a.ValidationError})`,()=>s.throw(v)),w(v),i||s.assign(_,!1)}),t.ok(_)}function m(){t.result((0,Ki.callValidateCode)(t,e,d),()=>$(e),()=>w(e))}function w(_){let v=(0,he._)`${_}.errors`;s.assign(Dt.default.vErrors,(0,he._)`${Dt.default.vErrors} === null ? ${v} : ${Dt.default.vErrors}.concat(${v})`),s.assign(Dt.default.errors,(0,he._)`${Dt.default.vErrors}.length`)}function $(_){var v;if(!a.opts.unevaluated)return;let E=(v=r?.validate)===null||v===void 0?void 0:v.evaluated;if(a.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(a.props=Wr.mergeEvaluated.props(s,E.props,a.props));else{let S=s.var("props",(0,he._)`${_}.evaluated.props`);a.props=Wr.mergeEvaluated.props(s,S,a.props,he.Name)}if(a.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(a.items=Wr.mergeEvaluated.items(s,E.items,a.items));else{let S=s.var("items",(0,he._)`${_}.evaluated.items`);a.items=Wr.mergeEvaluated.items(s,S,a.items,he.Name)}}}mt.callRef=Jr;mt.default=Ed});var Zi=N(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var wd=Hi(),bd=Ji(),Sd=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",wd.default,bd.default];ys.default=Sd});var Yi=N(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var Zr=q(),tt=Zr.operators,Yr={maximum:{okStr:"<=",ok:tt.LTE,fail:tt.GT},minimum:{okStr:">=",ok:tt.GTE,fail:tt.LT},exclusiveMaximum:{okStr:"<",ok:tt.LT,fail:tt.GTE},exclusiveMinimum:{okStr:">",ok:tt.GT,fail:tt.LTE}},Pd={message:({keyword:t,schemaCode:e})=>(0,Zr.str)`must be ${Yr[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Zr._)`{comparison: ${Yr[t].okStr}, limit: ${e}}`},Td={keyword:Object.keys(Yr),type:"number",schemaType:"number",$data:!0,error:Pd,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Zr._)`${r} ${Yr[e].fail} ${n} || isNaN(${r})`)}};vs.default=Td});var Qi=N(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var mr=q(),Nd={message:({schemaCode:t})=>(0,mr.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,mr._)`{multipleOf: ${t}}`},Id={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Nd,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,a=s.opts.multipleOfPrecision,i=e.let("res"),o=a?(0,mr._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:(0,mr._)`${i} !== parseInt(${i})`;t.fail$data((0,mr._)`(${n} === 0 || (${i} = ${r}/${n}, ${o}))`)}};gs.default=Id});var eo=N(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});function Xi(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}_s.default=Xi;Xi.code='require("ajv/dist/runtime/ucs2length").default'});var to=N($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var ht=q(),Od=F(),Cd=eo(),Rd={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ht.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ht._)`{limit: ${t}}`},Ad={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Rd,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,a=e==="maxLength"?ht.operators.GT:ht.operators.LT,i=s.opts.unicode===!1?(0,ht._)`${r}.length`:(0,ht._)`${(0,Od.useFunc)(t.gen,Cd.default)}(${r})`;t.fail$data((0,ht._)`${i} ${a} ${n}`)}};$s.default=Ad});var ro=N(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var kd=we(),Qr=q(),Md={message:({schemaCode:t})=>(0,Qr.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Qr._)`{pattern: ${t}}`},Dd={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Md,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:a}=t,i=a.opts.unicodeRegExp?"u":"",o=r?(0,Qr._)`(new RegExp(${s}, ${i}))`:(0,kd.usePattern)(t,n);t.fail$data((0,Qr._)`!${o}.test(${e})`)}};Es.default=Dd});var no=N(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var hr=q(),qd={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,hr.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,hr._)`{limit: ${t}}`},jd={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:qd,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?hr.operators.GT:hr.operators.LT;t.fail$data((0,hr._)`Object.keys(${r}).length ${s} ${n}`)}};ws.default=jd});var so=N(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});var yr=we(),vr=q(),xd=F(),Ld={message:({params:{missingProperty:t}})=>(0,vr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,vr._)`{missingProperty: ${t}}`},Ud={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ld,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:a,it:i}=t,{opts:o}=i;if(!a&&r.length===0)return;let l=r.length>=o.loopRequired;if(i.allErrors?d():f(),o.strictRequired){let $=t.parentSchema.properties,{definedProperties:_}=t.it;for(let v of r)if($?.[v]===void 0&&!_.has(v)){let E=i.schemaEnv.baseId+i.errSchemaPath,S=`required property "${v}" is not defined at "${E}" (strictRequired)`;(0,xd.checkStrictMode)(i,S,i.opts.strictRequired)}}function d(){if(l||a)t.block$data(vr.nil,m);else for(let $ of r)(0,yr.checkReportMissingProp)(t,$)}function f(){let $=e.let("missing");if(l||a){let _=e.let("valid",!0);t.block$data(_,()=>w($,_)),t.ok(_)}else e.if((0,yr.checkMissingProp)(t,r,$)),(0,yr.reportMissingProp)(t,$),e.else()}function m(){e.forOf("prop",n,$=>{t.setParams({missingProperty:$}),e.if((0,yr.noPropertyInData)(e,s,$,o.ownProperties),()=>t.error())})}function w($,_){t.setParams({missingProperty:$}),e.forOf($,n,()=>{e.assign(_,(0,yr.propertyInData)(e,s,$,o.ownProperties)),e.if((0,vr.not)(_),()=>{t.error(),e.break()})},vr.nil)}}};bs.default=Ud});var ao=N(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var gr=q(),Vd={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,gr.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,gr._)`{limit: ${t}}`},Fd={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Vd,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?gr.operators.GT:gr.operators.LT;t.fail$data((0,gr._)`${r}.length ${s} ${n}`)}};Ss.default=Fd});var Xr=N(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var io=es();io.code='require("ajv/dist/runtime/equal").default';Ps.default=io});var oo=N(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});var Ts=ir(),ie=q(),zd=F(),Gd=Xr(),Hd={message:({params:{i:t,j:e}})=>(0,ie.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,ie._)`{i: ${t}, j: ${e}}`},Kd={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Hd,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:a,schemaCode:i,it:o}=t;if(!n&&!s)return;let l=e.let("valid"),d=a.items?(0,Ts.getSchemaTypes)(a.items):[];t.block$data(l,f,(0,ie._)`${i} === false`),t.ok(l);function f(){let _=e.let("i",(0,ie._)`${r}.length`),v=e.let("j");t.setParams({i:_,j:v}),e.assign(l,!0),e.if((0,ie._)`${_} > 1`,()=>(m()?w:$)(_,v))}function m(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function w(_,v){let E=e.name("item"),S=(0,Ts.checkDataTypes)(d,E,o.opts.strictNumbers,Ts.DataType.Wrong),P=e.const("indices",(0,ie._)`{}`);e.for((0,ie._)`;${_}--;`,()=>{e.let(E,(0,ie._)`${r}[${_}]`),e.if(S,(0,ie._)`continue`),d.length>1&&e.if((0,ie._)`typeof ${E} == "string"`,(0,ie._)`${E} += "_"`),e.if((0,ie._)`typeof ${P}[${E}] == "number"`,()=>{e.assign(v,(0,ie._)`${P}[${E}]`),t.error(),e.assign(l,!1).break()}).code((0,ie._)`${P}[${E}] = ${_}`)})}function $(_,v){let E=(0,zd.useFunc)(e,Gd.default),S=e.name("outer");e.label(S).for((0,ie._)`;${_}--;`,()=>e.for((0,ie._)`${v} = ${_}; ${v}--;`,()=>e.if((0,ie._)`${E}(${r}[${_}], ${r}[${v}])`,()=>{t.error(),e.assign(l,!1).break(S)})))}}};Ns.default=Kd});var co=N(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});var Is=q(),Bd=F(),Wd=Xr(),Jd={message:"must be equal to constant",params:({schemaCode:t})=>(0,Is._)`{allowedValue: ${t}}`},Zd={keyword:"const",$data:!0,error:Jd,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:a}=t;n||a&&typeof a=="object"?t.fail$data((0,Is._)`!${(0,Bd.useFunc)(e,Wd.default)}(${r}, ${s})`):t.fail((0,Is._)`${a} !== ${r}`)}};Os.default=Zd});var uo=N(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var _r=q(),Yd=F(),Qd=Xr(),Xd={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,_r._)`{allowedValues: ${t}}`},ef={keyword:"enum",schemaType:"array",$data:!0,error:Xd,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:a,it:i}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let o=s.length>=i.opts.loopEnum,l,d=()=>l??(l=(0,Yd.useFunc)(e,Qd.default)),f;if(o||n)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let $=e.const("vSchema",a);f=(0,_r.or)(...s.map((_,v)=>w($,v)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",a,$=>e.if((0,_r._)`${d()}(${r}, ${$})`,()=>e.assign(f,!0).break()))}function w($,_){let v=s[_];return typeof v=="object"&&v!==null?(0,_r._)`${d()}(${r}, ${$}[${_}])`:(0,_r._)`${r} === ${v}`}}};Cs.default=ef});var lo=N(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});var tf=Yi(),rf=Qi(),nf=to(),sf=ro(),af=no(),of=so(),cf=ao(),uf=oo(),lf=co(),df=uo(),ff=[tf.default,rf.default,nf.default,sf.default,af.default,of.default,cf.default,uf.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},lf.default,df.default];Rs.default=ff});var ks=N($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.validateAdditionalItems=void 0;var yt=q(),As=F(),pf={message:({params:{len:t}})=>(0,yt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yt._)`{limit: ${t}}`},mf={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:pf,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,As.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}fo(t,n)}};function fo(t,e){let{gen:r,schema:n,data:s,keyword:a,it:i}=t;i.items=!0;let o=r.const("len",(0,yt._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,yt._)`${o} <= ${e.length}`);else if(typeof n=="object"&&!(0,As.alwaysValidSchema)(i,n)){let d=r.var("valid",(0,yt._)`${o} <= ${e.length}`);r.if((0,yt.not)(d),()=>l(d)),t.ok(d)}function l(d){r.forRange("i",e.length,o,f=>{t.subschema({keyword:a,dataProp:f,dataPropType:As.Type.Num},d),i.allErrors||r.if((0,yt.not)(d),()=>r.break())})}}$r.validateAdditionalItems=fo;$r.default=mf});var Ms=N(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.validateTuple=void 0;var po=q(),en=F(),hf=we(),yf={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return mo(t,"additionalItems",e);r.items=!0,!(0,en.alwaysValidSchema)(r,e)&&t.ok((0,hf.validateArray)(t))}};function mo(t,e,r=t.schema){let{gen:n,parentSchema:s,data:a,keyword:i,it:o}=t;f(s),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=en.mergeEvaluated.items(n,r.length,o.items));let l=n.name("valid"),d=n.const("len",(0,po._)`${a}.length`);r.forEach((m,w)=>{(0,en.alwaysValidSchema)(o,m)||(n.if((0,po._)`${d} > ${w}`,()=>t.subschema({keyword:i,schemaProp:w,dataProp:w},l)),t.ok(l))});function f(m){let{opts:w,errSchemaPath:$}=o,_=r.length,v=_===m.minItems&&(_===m.maxItems||m[e]===!1);if(w.strictTuples&&!v){let E=`"${i}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${$}"`;(0,en.checkStrictMode)(o,E,w.strictTuples)}}}Er.validateTuple=mo;Er.default=yf});var ho=N(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});var vf=Ms(),gf={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,vf.validateTuple)(t,"items")};Ds.default=gf});var vo=N(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var yo=q(),_f=F(),$f=we(),Ef=ks(),wf={message:({params:{len:t}})=>(0,yo.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yo._)`{limit: ${t}}`},bf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wf,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,_f.alwaysValidSchema)(n,e)&&(s?(0,Ef.validateAdditionalItems)(t,s):t.ok((0,$f.validateArray)(t)))}};qs.default=bf});var go=N(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Se=q(),tn=F(),Sf={message:({params:{min:t,max:e}})=>e===void 0?(0,Se.str)`must contain at least ${t} valid item(s)`:(0,Se.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Se._)`{minContains: ${t}}`:(0,Se._)`{minContains: ${t}, maxContains: ${e}}`},Pf={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Sf,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t,i,o,{minContains:l,maxContains:d}=n;a.opts.next?(i=l===void 0?1:l,o=d):i=1;let f=e.const("len",(0,Se._)`${s}.length`);if(t.setParams({min:i,max:o}),o===void 0&&i===0){(0,tn.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&i>o){(0,tn.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,tn.alwaysValidSchema)(a,r)){let v=(0,Se._)`${f} >= ${i}`;o!==void 0&&(v=(0,Se._)`${v} && ${f} <= ${o}`),t.pass(v);return}a.items=!0;let m=e.name("valid");o===void 0&&i===1?$(m,()=>e.if(m,()=>e.break())):i===0?(e.let(m,!0),o!==void 0&&e.if((0,Se._)`${s}.length > 0`,w)):(e.let(m,!1),w()),t.result(m,()=>t.reset());function w(){let v=e.name("_valid"),E=e.let("count",0);$(v,()=>e.if(v,()=>_(E)))}function $(v,E){e.forRange("i",0,f,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:tn.Type.Num,compositeRule:!0},v),E()})}function _(v){e.code((0,Se._)`${v}++`),o===void 0?e.if((0,Se._)`${v} >= ${i}`,()=>e.assign(m,!0).break()):(e.if((0,Se._)`${v} > ${o}`,()=>e.assign(m,!1).break()),i===1?e.assign(m,!0):e.if((0,Se._)`${v} >= ${i}`,()=>e.assign(m,!0)))}}};js.default=Pf});var Eo=N(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.validateSchemaDeps=je.validatePropertyDeps=je.error=void 0;var xs=q(),Tf=F(),wr=we();je.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,xs.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,xs._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Nf={keyword:"dependencies",type:"object",schemaType:"object",error:je.error,code(t){let[e,r]=If(t);_o(t,e),$o(t,r)}};function If({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function _o(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let a=r.let("missing");for(let i in e){let o=e[i];if(o.length===0)continue;let l=(0,wr.propertyInData)(r,n,i,s.opts.ownProperties);t.setParams({property:i,depsCount:o.length,deps:o.join(", ")}),s.allErrors?r.if(l,()=>{for(let d of o)(0,wr.checkReportMissingProp)(t,d)}):(r.if((0,xs._)`${l} && (${(0,wr.checkMissingProp)(t,o,a)})`),(0,wr.reportMissingProp)(t,a),r.else())}}je.validatePropertyDeps=_o;function $o(t,e=t.schema){let{gen:r,data:n,keyword:s,it:a}=t,i=r.name("valid");for(let o in e)(0,Tf.alwaysValidSchema)(a,e[o])||(r.if((0,wr.propertyInData)(r,n,o,a.opts.ownProperties),()=>{let l=t.subschema({keyword:s,schemaProp:o},i);t.mergeValidEvaluated(l,i)},()=>r.var(i,!0)),t.ok(i))}je.validateSchemaDeps=$o;je.default=Nf});var bo=N(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var wo=q(),Of=F(),Cf={message:"property name must be valid",params:({params:t})=>(0,wo._)`{propertyName: ${t.propertyName}}`},Rf={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Cf,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Of.alwaysValidSchema)(s,r))return;let a=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},a),e.if((0,wo.not)(a),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(a)}};Ls.default=Rf});var Vs=N(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var rn=we(),Oe=q(),Af=Be(),nn=F(),kf={message:"must NOT have additional properties",params:({params:t})=>(0,Oe._)`{additionalProperty: ${t.additionalProperty}}`},Mf={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:kf,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:a,it:i}=t;if(!a)throw new Error("ajv implementation error");let{allErrors:o,opts:l}=i;if(i.props=!0,l.removeAdditional!=="all"&&(0,nn.alwaysValidSchema)(i,r))return;let d=(0,rn.allSchemaProperties)(n.properties),f=(0,rn.allSchemaProperties)(n.patternProperties);m(),t.ok((0,Oe._)`${a} === ${Af.default.errors}`);function m(){e.forIn("key",s,E=>{!d.length&&!f.length?_(E):e.if(w(E),()=>_(E))})}function w(E){let S;if(d.length>8){let P=(0,nn.schemaRefOrVal)(i,n.properties,"properties");S=(0,rn.isOwnProperty)(e,P,E)}else d.length?S=(0,Oe.or)(...d.map(P=>(0,Oe._)`${E} === ${P}`)):S=Oe.nil;return f.length&&(S=(0,Oe.or)(S,...f.map(P=>(0,Oe._)`${(0,rn.usePattern)(t,P)}.test(${E})`))),(0,Oe.not)(S)}function $(E){e.code((0,Oe._)`delete ${s}[${E}]`)}function _(E){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){$(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),o||e.break();return}if(typeof r=="object"&&!(0,nn.alwaysValidSchema)(i,r)){let S=e.name("valid");l.removeAdditional==="failing"?(v(E,S,!1),e.if((0,Oe.not)(S),()=>{t.reset(),$(E)})):(v(E,S),o||e.if((0,Oe.not)(S),()=>e.break()))}}function v(E,S,P){let I={keyword:"additionalProperties",dataProp:E,dataPropType:nn.Type.Str};P===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(I,S)}}};Us.default=Mf});var To=N(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var Df=lr(),So=we(),Fs=F(),Po=Vs(),qf={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:a}=t;a.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Po.default.code(new Df.KeywordCxt(a,Po.default,"additionalProperties"));let i=(0,So.allSchemaProperties)(r);for(let m of i)a.definedProperties.add(m);a.opts.unevaluated&&i.length&&a.props!==!0&&(a.props=Fs.mergeEvaluated.props(e,(0,Fs.toHash)(i),a.props));let o=i.filter(m=>!(0,Fs.alwaysValidSchema)(a,r[m]));if(o.length===0)return;let l=e.name("valid");for(let m of o)d(m)?f(m):(e.if((0,So.propertyInData)(e,s,m,a.opts.ownProperties)),f(m),a.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(l);function d(m){return a.opts.useDefaults&&!a.compositeRule&&r[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},l)}}};zs.default=qf});var Co=N(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var No=we(),sn=q(),Io=F(),Oo=F(),jf={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:a}=t,{opts:i}=a,o=(0,No.allSchemaProperties)(r),l=o.filter(v=>(0,Io.alwaysValidSchema)(a,r[v]));if(o.length===0||l.length===o.length&&(!a.opts.unevaluated||a.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&s.properties,f=e.name("valid");a.props!==!0&&!(a.props instanceof sn.Name)&&(a.props=(0,Oo.evaluatedPropsToName)(e,a.props));let{props:m}=a;w();function w(){for(let v of o)d&&$(v),a.allErrors?_(v):(e.var(f,!0),_(v),e.if(f))}function $(v){for(let E in d)new RegExp(v).test(E)&&(0,Io.checkStrictMode)(a,`property ${E} matches pattern ${v} (use allowMatchingProperties)`)}function _(v){e.forIn("key",n,E=>{e.if((0,sn._)`${(0,No.usePattern)(t,v)}.test(${E})`,()=>{let S=l.includes(v);S||t.subschema({keyword:"patternProperties",schemaProp:v,dataProp:E,dataPropType:Oo.Type.Str},f),a.opts.unevaluated&&m!==!0?e.assign((0,sn._)`${m}[${E}]`,!0):!S&&!a.allErrors&&e.if((0,sn.not)(f),()=>e.break())})})}}};Gs.default=jf});var Ro=N(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var xf=F(),Lf={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,xf.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Hs.default=Lf});var Ao=N(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var Uf=we(),Vf={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Uf.validateUnion,error:{message:"must match a schema in anyOf"}};Ks.default=Vf});var ko=N(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var an=q(),Ff=F(),zf={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,an._)`{passingSchemas: ${t.passing}}`},Gf={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:zf,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let a=r,i=e.let("valid",!1),o=e.let("passing",null),l=e.name("_valid");t.setParams({passing:o}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){a.forEach((f,m)=>{let w;(0,Ff.alwaysValidSchema)(s,f)?e.var(l,!0):w=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},l),m>0&&e.if((0,an._)`${l} && ${i}`).assign(i,!1).assign(o,(0,an._)`[${o}, ${m}]`).else(),e.if(l,()=>{e.assign(i,!0),e.assign(o,m),w&&t.mergeEvaluated(w,an.Name)})})}}};Bs.default=Gf});var Mo=N(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var Hf=F(),Kf={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((a,i)=>{if((0,Hf.alwaysValidSchema)(n,a))return;let o=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(o)})}};Ws.default=Kf});var jo=N(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var on=q(),qo=F(),Bf={message:({params:t})=>(0,on.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,on._)`{failingKeyword: ${t.ifClause}}`},Wf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Bf,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,qo.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Do(n,"then"),a=Do(n,"else");if(!s&&!a)return;let i=e.let("valid",!0),o=e.name("_valid");if(l(),t.reset(),s&&a){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(o,d("then",f),d("else",f))}else s?e.if(o,d("then")):e.if((0,on.not)(o),d("else"));t.pass(i,()=>t.error(!0));function l(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);t.mergeEvaluated(f)}function d(f,m){return()=>{let w=t.subschema({keyword:f},o);e.assign(i,o),t.mergeValidEvaluated(w,i),m?e.assign(m,(0,on._)`${f}`):t.setParams({ifClause:f})}}}};function Do(t,e){let r=t.schema[e];return r!==void 0&&!(0,qo.alwaysValidSchema)(t,r)}Js.default=Wf});var xo=N(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var Jf=F(),Zf={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Jf.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Zs.default=Zf});var Lo=N(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Yf=ks(),Qf=ho(),Xf=Ms(),ep=vo(),tp=go(),rp=Eo(),np=bo(),sp=Vs(),ap=To(),ip=Co(),op=Ro(),cp=Ao(),up=ko(),lp=Mo(),dp=jo(),fp=xo();function pp(t=!1){let e=[op.default,cp.default,up.default,lp.default,dp.default,fp.default,np.default,sp.default,rp.default,ap.default,ip.default];return t?e.push(Qf.default,ep.default):e.push(Yf.default,Xf.default),e.push(tp.default),e}Ys.default=pp});var Uo=N(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var te=q(),mp={message:({schemaCode:t})=>(0,te.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,te._)`{format: ${t}}`},hp={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:mp,code(t,e){let{gen:r,data:n,$data:s,schema:a,schemaCode:i,it:o}=t,{opts:l,errSchemaPath:d,schemaEnv:f,self:m}=o;if(!l.validateFormats)return;s?w():$();function w(){let _=r.scopeValue("formats",{ref:m.formats,code:l.code.formats}),v=r.const("fDef",(0,te._)`${_}[${i}]`),E=r.let("fType"),S=r.let("format");r.if((0,te._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>r.assign(E,(0,te._)`${v}.type || "string"`).assign(S,(0,te._)`${v}.validate`),()=>r.assign(E,(0,te._)`"string"`).assign(S,v)),t.fail$data((0,te.or)(P(),I()));function P(){return l.strictSchema===!1?te.nil:(0,te._)`${i} && !${S}`}function I(){let b=f.$async?(0,te._)`(${v}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,te._)`${S}(${n})`,g=(0,te._)`(typeof ${S} == "function" ? ${b} : ${S}.test(${n}))`;return(0,te._)`${S} && ${S} !== true && ${E} === ${e} && !${g}`}}function $(){let _=m.formats[a];if(!_){P();return}if(_===!0)return;let[v,E,S]=I(_);v===e&&t.pass(b());function P(){if(l.strictSchema===!1){m.logger.warn(g());return}throw new Error(g());function g(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function I(g){let H=g instanceof RegExp?(0,te.regexpCode)(g):l.code.formats?(0,te._)`${l.code.formats}${(0,te.getProperty)(a)}`:void 0,C=r.scopeValue("formats",{key:a,ref:g,code:H});return typeof g=="object"&&!(g instanceof RegExp)?[g.type||"string",g.validate,(0,te._)`${C}.validate`]:["string",g,C]}function b(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!f.$async)throw new Error("async format in sync schema");return(0,te._)`await ${S}(${n})`}return typeof E=="function"?(0,te._)`${S}(${n})`:(0,te._)`${S}.test(${n})`}}}};Qs.default=hp});var Vo=N(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var yp=Uo(),vp=[yp.default];Xs.default=vp});var Fo=N(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.contentVocabulary=qt.metadataVocabulary=void 0;qt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];qt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Go=N(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var gp=Zi(),_p=lo(),$p=Lo(),Ep=Vo(),zo=Fo(),wp=[gp.default,_p.default,(0,$p.default)(),Ep.default,zo.metadataVocabulary,zo.contentVocabulary];ea.default=wp});var Ho=N(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.DiscrError=void 0;var bp;(function(t){t.Tag="tag",t.Mapping="mapping"})(bp=br.DiscrError||(br.DiscrError={}))});var Bo=N(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var jt=q(),ta=Ho(),Ko=Hr(),Sp=F(),Pp={message:({params:{discrError:t,tagName:e}})=>t===ta.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,jt._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Tp={keyword:"discriminator",type:"object",schemaType:"object",error:Pp,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:a}=t,{oneOf:i}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");let o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),d=e.const("tag",(0,jt._)`${r}${(0,jt.getProperty)(o)}`);e.if((0,jt._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:ta.DiscrError.Tag,tag:d,tagName:o})),t.ok(l);function f(){let $=w();e.if(!1);for(let _ in $)e.elseIf((0,jt._)`${d} === ${_}`),e.assign(l,m($[_]));e.else(),t.error(!1,{discrError:ta.DiscrError.Mapping,tag:d,tagName:o}),e.endIf()}function m($){let _=e.name("valid"),v=t.subschema({keyword:"oneOf",schemaProp:$},_);return t.mergeEvaluated(v,jt.Name),_}function w(){var $;let _={},v=S(s),E=!0;for(let b=0;b<i.length;b++){let g=i[b];g?.$ref&&!(0,Sp.schemaHasRulesButRef)(g,a.self.RULES)&&(g=Ko.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,g?.$ref),g instanceof Ko.SchemaEnv&&(g=g.schema));let H=($=g?.properties)===null||$===void 0?void 0:$[o];if(typeof H!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);E=E&&(v||S(g)),P(H,b)}if(!E)throw new Error(`discriminator: "${o}" must be required`);return _;function S({required:b}){return Array.isArray(b)&&b.includes(o)}function P(b,g){if(b.const)I(b.const,g);else if(b.enum)for(let H of b.enum)I(H,g);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function I(b,g){if(typeof b!="string"||b in _)throw new Error(`discriminator: "${o}" values must be unique strings`);_[b]=g}}}};ra.default=Tp});var Wo=N((mh,Np)=>{Np.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Yo=N((ee,Zo)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.MissingRefError=ee.ValidationError=ee.CodeGen=ee.Name=ee.nil=ee.stringify=ee.str=ee._=ee.KeywordCxt=void 0;var Ip=Gi(),Op=Go(),Cp=Bo(),Jo=Wo(),Rp=["/properties"],cn="http://json-schema.org/draft-07/schema",un=class extends Ip.default{_addVocabularies(){super._addVocabularies(),Op.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Cp.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Jo,Rp):Jo;this.addMetaSchema(e,cn,!1),this.refs["http://json-schema.org/schema"]=cn}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(cn)?cn:void 0)}};Zo.exports=ee=un;Object.defineProperty(ee,"__esModule",{value:!0});ee.default=un;var Ap=lr();Object.defineProperty(ee,"KeywordCxt",{enumerable:!0,get:function(){return Ap.KeywordCxt}});var xt=q();Object.defineProperty(ee,"_",{enumerable:!0,get:function(){return xt._}});Object.defineProperty(ee,"str",{enumerable:!0,get:function(){return xt.str}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return xt.stringify}});Object.defineProperty(ee,"nil",{enumerable:!0,get:function(){return xt.nil}});Object.defineProperty(ee,"Name",{enumerable:!0,get:function(){return xt.Name}});Object.defineProperty(ee,"CodeGen",{enumerable:!0,get:function(){return xt.CodeGen}});var kp=Fr();Object.defineProperty(ee,"ValidationError",{enumerable:!0,get:function(){return kp.default}});var Mp=zr();Object.defineProperty(ee,"MissingRefError",{enumerable:!0,get:function(){return Mp.default}})});var Xo=N((Eh,dn)=>{var na=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(i,o){if(!n[i]){n[i]={};for(var l=0;l<i.length;l++)n[i][i.charAt(l)]=l}return n[i][o]}var a={compressToBase64:function(i){if(i==null)return"";var o=a._compress(i,6,function(l){return e.charAt(l)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:a._decompress(i.length,32,function(o){return s(e,i.charAt(o))})},compressToUTF16:function(i){return i==null?"":a._compress(i,15,function(o){return t(o+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:a._decompress(i.length,16384,function(o){return i.charCodeAt(o)-32})},compressToUint8Array:function(i){for(var o=a.compress(i),l=new Uint8Array(o.length*2),d=0,f=o.length;d<f;d++){var m=o.charCodeAt(d);l[d*2]=m>>>8,l[d*2+1]=m%256}return l},decompressFromUint8Array:function(i){if(i==null)return a.decompress(i);for(var o=new Array(i.length/2),l=0,d=o.length;l<d;l++)o[l]=i[l*2]*256+i[l*2+1];var f=[];return o.forEach(function(m){f.push(t(m))}),a.decompress(f.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":a._compress(i,6,function(o){return r.charAt(o)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),a._decompress(i.length,32,function(o){return s(r,i.charAt(o))}))},compress:function(i){return a._compress(i,16,function(o){return t(o)})},_compress:function(i,o,l){if(i==null)return"";var d,f,m={},w={},$="",_="",v="",E=2,S=3,P=2,I=[],b=0,g=0,H;for(H=0;H<i.length;H+=1)if($=i.charAt(H),Object.prototype.hasOwnProperty.call(m,$)||(m[$]=S++,w[$]=!0),_=v+$,Object.prototype.hasOwnProperty.call(m,_))v=_;else{if(Object.prototype.hasOwnProperty.call(w,v)){if(v.charCodeAt(0)<256){for(d=0;d<P;d++)b=b<<1,g==o-1?(g=0,I.push(l(b)),b=0):g++;for(f=v.charCodeAt(0),d=0;d<8;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1}else{for(f=1,d=0;d<P;d++)b=b<<1|f,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=0;for(f=v.charCodeAt(0),d=0;d<16;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1}E--,E==0&&(E=Math.pow(2,P),P++),delete w[v]}else for(f=m[v],d=0;d<P;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1;E--,E==0&&(E=Math.pow(2,P),P++),m[_]=S++,v=String($)}if(v!==""){if(Object.prototype.hasOwnProperty.call(w,v)){if(v.charCodeAt(0)<256){for(d=0;d<P;d++)b=b<<1,g==o-1?(g=0,I.push(l(b)),b=0):g++;for(f=v.charCodeAt(0),d=0;d<8;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1}else{for(f=1,d=0;d<P;d++)b=b<<1|f,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=0;for(f=v.charCodeAt(0),d=0;d<16;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1}E--,E==0&&(E=Math.pow(2,P),P++),delete w[v]}else for(f=m[v],d=0;d<P;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1;E--,E==0&&(E=Math.pow(2,P),P++)}for(f=2,d=0;d<P;d++)b=b<<1|f&1,g==o-1?(g=0,I.push(l(b)),b=0):g++,f=f>>1;for(;;)if(b=b<<1,g==o-1){I.push(l(b));break}else g++;return I.join("")},decompress:function(i){return i==null?"":i==""?null:a._decompress(i.length,32768,function(o){return i.charCodeAt(o)})},_decompress:function(i,o,l){var d=[],f,m=4,w=4,$=3,_="",v=[],E,S,P,I,b,g,H,C={val:l(0),position:o,index:1};for(E=0;E<3;E+=1)d[E]=E;for(P=0,b=Math.pow(2,2),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;switch(f=P){case 0:for(P=0,b=Math.pow(2,8),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;H=t(P);break;case 1:for(P=0,b=Math.pow(2,16),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;H=t(P);break;case 2:return""}for(d[3]=H,S=H,v.push(H);;){if(C.index>i)return"";for(P=0,b=Math.pow(2,$),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;switch(H=P){case 0:for(P=0,b=Math.pow(2,8),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;d[w++]=t(P),H=w-1,m--;break;case 1:for(P=0,b=Math.pow(2,16),g=1;g!=b;)I=C.val&C.position,C.position>>=1,C.position==0&&(C.position=o,C.val=l(C.index++)),P|=(I>0?1:0)*g,g<<=1;d[w++]=t(P),H=w-1,m--;break;case 2:return v.join("")}if(m==0&&(m=Math.pow(2,$),$++),d[H])_=d[H];else if(H===w)_=S+S.charAt(0);else return null;v.push(_),d[w++]=S+_.charAt(0),m--,S=_,m==0&&(m=Math.pow(2,$),$++)}}};return a}();typeof define=="function"&&define.amd?define(function(){return na}):typeof dn<"u"&&dn!=null?dn.exports=na:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return na})});var xc=(t,e)=>Math.random()*(e-t)+t,Ia=(t,e)=>Math.floor(xc(t,e));var Or=t=>typeof t=="string";var Sn=t=>t!==void 0,Lc=t=>t===null;var Oa=t=>Sn(t)&&!Lc(t);function Ca(t=0){let e=Date.now()-t,r=Math.floor(e/864e5),n=Math.floor(e/36e5)%24,s=(Math.floor(e/6e4)%60).toFixed();return{days:r,hours:n,mins:s,ms:e}}function ze(t,e){if(!Sn(t))throw new TypeError(e??"value is undefined")}function Ra(t,e){if(!Oa(t))throw new TypeError(e??"value is null or undefined")}function Aa(t,e,r){if(!e(t))throw new TypeError(r)}Array.prototype.remove=function(t){let e=this.indexOf(t);return e===-1?!1:(this.splice(e,1),!0)};Array.prototype.clear=function(){this.splice(0)};Array.prototype.random=function(){let t=Ia(0,this.length),e=this[t];return ze(e),e};Array.prototype.findStrict=function(t){let e=this.find(t);return ze(e,"Item must exist when called with Array.findStrict()"),e};function Cr(t){let e=t.name;customElements.get(e)||customElements.define(e,t);let r=document.createElement(e);return r.init?.(),r}typeof Document<"u"&&(Document.prototype.querySelectorStrict=function(t){let e=this.querySelector(t);if(!e)throw new Error(`Element with selectors ${t} could not be found!`);return e});typeof Element<"u"&&(Element.prototype.querySelectorStrict=function(t){let e=this.querySelector(t);if(!e)throw new Error(`Element with selectors ${t} could not be found!`);return e},Element.prototype.getAttributeStrict=function(t){let e=this.getAttribute(t);return Aa(e,Or,`missing attribute: ${t}`),e});var Ge={$schema:"moduleList.schema.json",list:[{id:"1ea84a",name:"Demo",url:"./demo.module.jsonc",description:`This module acts as a demo. 
It's made by the developer of this game.
The purpose of this module is to showcase the base game and may contain a lot of missing features.`}]};var vh=Na(Yo(),1);function ln(t,e){return`dist/game_${t}/${e}`}var Dp=t=>t.replace(/\/\*[\s\S]*?\*\/|(?<=[^:])\/\/.*|^\/\/.*/g,"").trim();async function Qo(t){t=Dp(t);let e=JSON.parse(t),r="v0";Object.hasOwn(e,"version")&&typeof e.version=="string"&&(r=e.version);let n=ln(r,"gameModuleSchemaValidator.mjs"),s=new URL(n,window.location.href).href,{validate:a}=await import(s);if(!a(e)){let i=[];return"errors"in a&&(i=a.errors),`GameModule Validation Failed!
${JSON.stringify(i.map(l=>({instancePath:l.instancePath,message:l.message})),null,2)}`}return e}var fn=Na(Xo(),1);function Lt(t){qp("game",Object.fromEntries(t))}function Pe(t){let e=jp("game"),r=new Map(Object.entries(JSON.parse(e)));return t?r.get(t):r}function qp(t,e){let r=JSON.stringify(e),n=fn.compressToEncodedURIComponent(r);localStorage.setItem(t,n)}function jp(t){let e=localStorage.getItem(t);return e?fn.decompressFromEncodedURIComponent(e):"{}"}var Ut=class t{static activeGameInstance;async startGame(e,r){try{let n=e.id,s=Ge.list.findStrict(f=>f.id===n).url,a=await this.getModuleText(s);if(!a)return;let i=await Qo(a);if(Or(i)){console.error(i);return}let o=r?Pe(n):void 0,l=ln(i.version,"game.js"),d=new URL(l,window.location.href).href;t.activeGameInstance?.dispose(window.TS),t.activeGameInstance=await import(d),Ra(t.activeGameInstance),await t.activeGameInstance.init([i,n,o,window.TS]),document.querySelectorStrict("[data-return-to-game-button]").style.visibility="visible",location.hash="#game"}catch(n){throw console.error(n),"Failed to start game"}}async startSavedGame(e){let r=Ge.list.find(n=>n.id===e.meta?.moduleId);ze(r,"invalid id"),await this.startGame(r,!0)}async getModuleText(e){let r=await fetch(e);return r.ok?await r.text():(console.error(`failed to get the module at (${e})`),null)}async deleteSaveById(...e){let r=Pe();r&&(e.forEach(n=>r.delete(n)),Lt(r))}};var Vt=class extends HTMLElement{cloneNode(e){return super.cloneNode(e),this.init?.(),this}};var pn=class extends Vt{static name="prompt-window-element";set minWidth(e){this.querySelectorStrict("[data-body]").style.minWidth=e}init(){let e=document.createElement("div");e.classList.add("s-content"),this.appendChild(e),e.insertAdjacentHTML("beforeend",'<div class="title" data-title></div>'),e.insertAdjacentHTML("beforeend",'<div class="s-body" data-body></div>'),e.insertAdjacentHTML("beforeend",'<div class="s-buttons" data-buttons></div>');let r=document.createElement("div");r.classList.add("backdrop"),r.addEventListener("click",()=>{this.remove()}),this.appendChild(r),document.body.appendChild(this)}setTitle(e){this.querySelectorStrict("[data-title]").textContent=e}setBodyText(e){this.querySelectorStrict("[data-body]").textContent=e}setBodyElement(e){this.querySelectorStrict("[data-body]").appendChild(e)}async setButtons(e,r="horizontal"){return new Promise(n=>{let s=[];for(let i of e){let o=document.createElement("button");o.setAttribute("type","submit"),i.type&&o.setAttribute("data-role",i.type),o.textContent=i.text,o.addEventListener("click",async()=>{await i.callback?.(),this.remove(),n(i.waitId)}),s.push(o)}let a=this.querySelectorStrict("[data-buttons]");a.replaceChildren(...s),a.style.display="flex",a.style.flexDirection=r==="horizontal"?"column":"row"})}};var mn=class extends Ut{page;moduleEntryList;constructor(){super(),this.page=document.createElement("div"),this.page.classList.add("p-new-game"),this.page.insertAdjacentHTML("beforeend",'<div class="g-title">Module List</div>'),this.page.insertAdjacentHTML("beforeend",'<div class="s-entry-info" data-entry-info></div>'),this.page.insertAdjacentHTML("beforeend",'<ul class="entry-list" data-entry-list></ul>'),this.moduleEntryList=Ge.list.map(e=>{let r=document.createElement("li");return r.classList.add("g-list-item"),r.setAttribute("data-id",e.id),r.textContent=e.name,r.addEventListener("click",()=>{this.selectEntryById(e.id)}),{moduleEntryData:e,element:r}}),this.page.querySelectorStrict("[data-entry-list]").append(...this.moduleEntryList.map(e=>e.element)),this.moduleEntryList[0]?.element.click()}selectEntryById(e){let r=this.moduleEntryList.findStrict(n=>n.moduleEntryData.id===e);this.showEntry(r),this.moduleEntryList.forEach(n=>n.element.classList.toggle("selected",n===r))}showEntry(e){let r=this.page.querySelectorStrict("[data-entry-info]");r.replaceChildren(),r.insertAdjacentHTML("beforeend",`<div class="g-title">${e.moduleEntryData.name}</div>`),r.insertAdjacentHTML("beforeend",`<div class="s-desc">${e.moduleEntryData.description}</div>`);let n=document.createElement("button");n.setAttribute("data-role","confirm"),n.textContent="Start Game",n.addEventListener("click",async()=>{await this.tryStartNewGame(e)}),r.appendChild(n)}async tryStartNewGame(e){if(Pe(e.moduleEntryData.id)){await this.showExistingSavePrompt(e);return}await this.startGame(e.moduleEntryData)}async showExistingSavePrompt(e){let r=Cr(pn);r.setTitle("Save Detected!"),r.setBodyText(`You already have an existing save. 
You can resume from this save or start a new game.`);let n=await r.setButtons([{text:"Resume",type:"utility",waitId:"continue"},{text:"New Game",type:"confirm",waitId:"new"},{text:"Cancel",type:"cancel",waitId:"cancel"}],"horizontal");if(n==="continue"){let s=Pe(e.moduleEntryData.id);ze(s),await this.startSavedGame(s)}else if(n==="new"){let s=Pe();s.delete(e.moduleEntryData.id),Lt(s),await this.tryStartNewGame(e)}}};var ec=(t,e)=>(e?.lastSavedAt||Number.POSITIVE_INFINITY)-(t?.lastSavedAt||Number.POSITIVE_INFINITY),hn=class extends Ut{page;saveEntryList=[];cachedSaveCount;constructor(){super(),this.page=document.createElement("div"),this.page.classList.add("p-load-game"),this.page.insertAdjacentHTML("beforeend",'<div class="g-title">Saved Games</div>'),this.page.insertAdjacentHTML("beforeend",'<div class="s-entry-info" data-entry-info></div>'),this.page.insertAdjacentHTML("beforeend",'<ul class="entry-list" data-entry-list></ul>'),this.loadSaveDataList(),new MutationObserver(()=>{this.page.classList.contains("hidden")||this.loadSaveDataList()}).observe(this.page,{attributes:!0,attributeFilter:["class"]})}loadSaveDataList(){let e=Pe(),r=[...e.values()];if(this.cachedSaveCount===r.length)return;this.cachedSaveCount=r.length,this.saveEntryList.splice(0);let n=Ge.list.map(a=>a.id);r.map(a=>a.meta).filter(a=>a?.moduleId&&n.includes(a.moduleId)).sort(ec);for(let[a,{meta:i}]of e){if(!i||!i.moduleId)continue;let o=Ge.list.find(w=>w.id===i.moduleId);if(!o)continue;let l=document.createElement("li");l.classList.add("g-list-item");let d=Ca(i.lastSavedAt||Date.now()),f=d.days?`${d.days}d`:d.hours?`${d.hours}h`:`${d.mins}min`;l.insertAdjacentHTML("beforeend",`<div>${o?.name}</div><var data-tag="mute">${f}</var>`),l.addEventListener("click",()=>this.selectEntryById(i.moduleId));let m={id:a,meta:{moduleId:i.moduleId,...i},moduleEntryData:o,element:l};this.saveEntryList.push(m)}this.page.querySelectorStrict("[data-entry-list]").replaceChildren(...this.saveEntryList.map(a=>a.element)),this.selectEntryById(this.saveEntryList[0]?.id)}selectEntryById(e){let r=this.saveEntryList.find(n=>n.meta.moduleId===e);this.showEntry(r),this.saveEntryList.forEach(n=>n.element.classList.toggle("selected",n===r))}showEntry(e){let r=this.page.querySelectorStrict("[data-entry-info]");if(r.replaceChildren(),!e)return;r.insertAdjacentHTML("beforeend",`<div class="g-title">${e.moduleEntryData.name}</div>`),r.insertAdjacentHTML("beforeend",`<div class="s-desc">${e.moduleEntryData.description}</div>`);let n=document.createElement("button");n.setAttribute("data-role","confirm"),n.textContent="Resume",n.addEventListener("click",async()=>{let a=Pe().get(e.id);ze(a),await this.startSavedGame(a)}),r.appendChild(n);let s=document.createElement("button");s.setAttribute("data-role","cancel"),s.textContent="Remove",s.addEventListener("click",async()=>{let a=Pe();a.delete(e.id),Lt(a),this.loadSaveDataList()}),r.appendChild(s)}async tryLoadRecentSave(){let r=[...Pe().values()];r.sort((s,a)=>ec(s.meta,a.meta));let n=r[0];!n||!Ge.list.some(s=>s.id===n.meta?.moduleId)||await this.startSavedGame(n)}};var yn=class t extends Vt{static name="tab-menu-element";pageList=[];init(){this.setDirection("vertical")}setDirection(e){this.setAttribute("data-direction",e)}appendMenuItem(e,r){e.classList.add("g-list-item"),this.appendChild(e),e.addEventListener("click",()=>{this.querySelectorAll("[data-page-target]").forEach(n=>{n.classList.toggle("selected",n===e),n.toggleAttribute("disabled",n===e)}),this.pageList.forEach(n=>n.classList.toggle("hidden",n.getAttribute("data-page-content")!==r))})}addMenuItem(e,r,n){let s=document.createElement("li");return s.textContent=e,s.setAttribute("data-page-target",r),n=n??this.children.length,s.setAttribute("data-index",n.toFixed()),this.appendMenuItem(s,r),s}registerPageElement(e,r){e.classList.add("hidden"),e.setAttribute("data-page-content",r),this.pageList.push(e),this.querySelector(".selected")||this.querySelector(`[data-page-target="${r}"]`)?.click()}sort(e){this.append(...[...this.querySelectorAll("li")].sort(e))}*generateTabMenuAncestorList(e,r=""){if(!e)return;let n=e?.hasAttribute("data-page-content")?e:null;if(!n)return n=e?.closest("[data-page-content]"),yield*this.generateTabMenuAncestorList(n);let s=n?.querySelector(`:scope > ${t.name}`);if(!s){let i=n.getAttribute("data-page-content");return n=n.parentElement?.closest("[data-page-content]")??null,yield*this.generateTabMenuAncestorList(n,i??"")}if(!r)return;let a=s.querySelector(`[data-page-target="${r}"]`);a&&(yield a),r=n?.getAttribute("data-page-content")??"",n=n.parentElement?.closest("[data-page-content]")??null,yield*this.generateTabMenuAncestorList(n,r)}*generateMenuItemListFromPageNameList(e,r){for(let n of r){if(!e)return;let s=e.querySelector(`:scope > ${t.name}`);if(!s)return;let a=s.querySelector(`[data-page-target="${n}"]`);if(!a)return;yield a,e=e.querySelector(`[data-page-content="${n}"]`)}}};var vn=class{page=document.querySelectorStrict('[data-page-content="home"]');loadGame;constructor(){let e=Cr(yn);this.page.appendChild(e);let r=document.createElement("div");r.classList.add("main-view"),r.setAttribute("data-main-view",""),this.page.appendChild(r);let n=document.createElement("li");n.textContent="New Game";let s=new mn;e.addMenuItem("New","new"),e.registerPageElement(s.page,"new"),r.appendChild(s.page);let a=document.createElement("li");a.textContent="Load Game",this.loadGame=new hn,e.addMenuItem("Load","load"),e.registerPageElement(this.loadGame.page,"load"),r.appendChild(this.loadGame.page),n.click()}async init(){await this.loadGame.tryLoadRecentSave()}};xp();async function xp(){window.TS={},history.replaceState(null,"","#home"),window.addEventListener("hashchange",Lp),await new vn().init(),document.body.classList.remove("hidden")}function Lp(){document.querySelector('[data-target="404"]')?.classList.add("hidden");let t=window.location.hash.replace("#","");t.length===0&&(t="home");let e=[...document.querySelectorAll("body > [data-page-content]")];for(let r of e)r.classList.toggle("hidden",r.getAttribute("data-page-content")!==t);e.every(r=>r.classList.contains("hidden"))&&(location.hash="home")}
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
